(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&f(x)}).observe(document,{childList:!0,subtree:!0});function c(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(d){if(d.ep)return;d.ep=!0;const g=c(d);fetch(d.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var interact_min={exports:{}};interact_min.exports;(function(v,s){(function(c,f){v.exports=f()})(commonjsGlobal,function(){function c(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);n&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),r.push.apply(r,o)}return r}function f(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?c(Object(r),!0).forEach(function(o){S(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}function d(i){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},d(i)}function g(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function x(i,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,B(o.key),o)}}function b(i,n,r){return n&&x(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function S(i,n,r){return(n=B(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function C(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&T(i,n)}function O(i){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O(i)}function T(i,n){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},T(i,n)}function _(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function D(i){var n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,o=O(i);if(n){var a=O(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(l)}(this,r)}}function M(){return M=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,n,r){var o=function(l,u){for(;!Object.prototype.hasOwnProperty.call(l,u)&&(l=O(l))!==null;);return l}(i,n);if(o){var a=Object.getOwnPropertyDescriptor(o,n);return a.get?a.get.call(arguments.length<3?i:r):a.value}},M.apply(this,arguments)}function B(i){var n=function(r,o){if(typeof r!="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var l=a.call(r,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(i,"string");return typeof n=="symbol"?n:n+""}var H=function(i){return!(!i||!i.Window)&&i instanceof i.Window},J=void 0,K=void 0;function ce(i){J=i;var n=i.document.createTextNode("");n.ownerDocument!==i.document&&typeof i.wrap=="function"&&i.wrap(n)===n&&(i=i.wrap(i)),K=i}function Y(i){return H(i)?i:(i.ownerDocument||i).defaultView||K.window}typeof window<"u"&&window&&ce(window);var oe=function(i){return!!i&&d(i)==="object"},Ce=function(i){return typeof i=="function"},P={window:function(i){return i===K||H(i)},docFrag:function(i){return oe(i)&&i.nodeType===11},object:oe,func:Ce,number:function(i){return typeof i=="number"},bool:function(i){return typeof i=="boolean"},string:function(i){return typeof i=="string"},element:function(i){if(!i||d(i)!=="object")return!1;var n=Y(i)||K;return/object|function/.test(typeof Element>"u"?"undefined":d(Element))?i instanceof Element||i instanceof n.Element:i.nodeType===1&&typeof i.nodeName=="string"},plainObject:function(i){return oe(i)&&!!i.constructor&&/function Object\b/.test(i.constructor.toString())},array:function(i){return oe(i)&&i.length!==void 0&&Ce(i.splice)}};function fe(i){var n=i.interaction;if(n.prepared.name==="drag"){var r=n.prepared.axis;r==="x"?(n.coords.cur.page.y=n.coords.start.page.y,n.coords.cur.client.y=n.coords.start.client.y,n.coords.velocity.client.y=0,n.coords.velocity.page.y=0):r==="y"&&(n.coords.cur.page.x=n.coords.start.page.x,n.coords.cur.client.x=n.coords.start.client.x,n.coords.velocity.client.x=0,n.coords.velocity.page.x=0)}}function te(i){var n=i.iEvent,r=i.interaction;if(r.prepared.name==="drag"){var o=r.prepared.axis;if(o==="x"||o==="y"){var a=o==="x"?"y":"x";n.page[a]=r.coords.start.page[a],n.client[a]=r.coords.start.client[a],n.delta[a]=0}}}var q={id:"actions/drag",install:function(i){var n=i.actions,r=i.Interactable,o=i.defaults;r.prototype.draggable=q.draggable,n.map.drag=q,n.methodDict.drag="draggable",o.actions.drag=q.defaults},listeners:{"interactions:before-action-move":fe,"interactions:action-resume":fe,"interactions:action-move":te,"auto-start:check":function(i){var n=i.interaction,r=i.interactable,o=i.buttons,a=r.options.drag;if(a&&a.enabled&&(!n.pointerIsDown||!/mouse|pointer/.test(n.pointerType)||o&r.options.drag.mouseButtons))return i.action={name:"drag",axis:a.lockAxis==="start"?a.startAxis:a.lockAxis},!1}},draggable:function(i){return P.object(i)?(this.options.drag.enabled=i.enabled!==!1,this.setPerAction("drag",i),this.setOnEvents("drag",i),/^(xy|x|y|start)$/.test(i.lockAxis)&&(this.options.drag.lockAxis=i.lockAxis),/^(xy|x|y)$/.test(i.startAxis)&&(this.options.drag.startAxis=i.startAxis),this):P.bool(i)?(this.options.drag.enabled=i,this):this.options.drag},beforeMove:fe,move:te,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(i){return i.search("drag")===0}},We=q,ae={init:function(i){var n=i;ae.document=n.document,ae.DocumentFragment=n.DocumentFragment||Q,ae.SVGElement=n.SVGElement||Q,ae.SVGSVGElement=n.SVGSVGElement||Q,ae.SVGElementInstance=n.SVGElementInstance||Q,ae.Element=n.Element||Q,ae.HTMLElement=n.HTMLElement||ae.Element,ae.Event=n.Event,ae.Touch=n.Touch||Q,ae.PointerEvent=n.PointerEvent||n.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function Q(){}var U=ae,ne={init:function(i){var n=U.Element,r=i.navigator||{};ne.supportsTouch="ontouchstart"in i||P.func(i.DocumentTouch)&&U.document instanceof i.DocumentTouch,ne.supportsPointerEvent=r.pointerEnabled!==!1&&!!U.PointerEvent,ne.isIOS=/iP(hone|od|ad)/.test(r.platform),ne.isIOS7=/iP(hone|od|ad)/.test(r.platform)&&/OS 7[^\d]/.test(r.appVersion),ne.isIe9=/MSIE 9/.test(r.userAgent),ne.isOperaMobile=r.appName==="Opera"&&ne.supportsTouch&&/Presto/.test(r.userAgent),ne.prefixedMatchesSelector="matches"in n.prototype?"matches":"webkitMatchesSelector"in n.prototype?"webkitMatchesSelector":"mozMatchesSelector"in n.prototype?"mozMatchesSelector":"oMatchesSelector"in n.prototype?"oMatchesSelector":"msMatchesSelector",ne.pEventTypes=ne.supportsPointerEvent?U.PointerEvent===i.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ne.wheelEvent=U.document&&"onmousewheel"in U.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},G=ne;function Z(i,n){if(i.contains)return i.contains(n);for(;n;){if(n===i)return!0;n=n.parentNode}return!1}function ye(i,n){for(;P.element(i);){if(ue(i,n))return i;i=se(i)}return null}function se(i){var n=i.parentNode;if(P.docFrag(n)){for(;(n=n.host)&&P.docFrag(n););return n}return n}function ue(i,n){return K!==J&&(n=n.replace(/\/deep\//g," ")),i[G.prefixedMatchesSelector](n)}var ee=function(i){return i.parentNode||i.host};function pe(i,n){for(var r,o=[],a=i;(r=ee(a))&&a!==n&&r!==a.ownerDocument;)o.unshift(a),a=r;return o}function he(i,n,r){for(;P.element(i);){if(ue(i,n))return!0;if((i=se(i))===r)return ue(i,n)}return!1}function Le(i){return i.correspondingUseElement||i}function Te(i){var n=i instanceof U.SVGElement?i.getBoundingClientRect():i.getClientRects()[0];return n&&{left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.width||n.right-n.left,height:n.height||n.bottom-n.top}}function ot(i){var n,r=Te(i);if(!G.isIOS7&&r){var o={x:(n=(n=Y(i))||K).scrollX||n.document.documentElement.scrollLeft,y:n.scrollY||n.document.documentElement.scrollTop};r.left+=o.x,r.right+=o.x,r.top+=o.y,r.bottom+=o.y}return r}function It(i){for(var n=[];i;)n.push(i),i=se(i);return n}function Lt(i){return!!P.string(i)&&(U.document.querySelector(i),!0)}function F(i,n){for(var r in n)i[r]=n[r];return i}function Mt(i,n,r){return i==="parent"?se(r):i==="self"?n.getRect(r):ye(r,i)}function Me(i,n,r,o){var a=i;return P.string(a)?a=Mt(a,n,r):P.func(a)&&(a=a.apply(void 0,o)),P.element(a)&&(a=ot(a)),a}function He(i){return i&&{x:"x"in i?i.x:i.left,y:"y"in i?i.y:i.top}}function at(i){return!i||"x"in i&&"y"in i||((i=F({},i)).x=i.left||0,i.y=i.top||0,i.width=i.width||(i.right||0)-i.x,i.height=i.height||(i.bottom||0)-i.y),i}function Ue(i,n,r){i.left&&(n.left+=r.x),i.right&&(n.right+=r.x),i.top&&(n.top+=r.y),i.bottom&&(n.bottom+=r.y),n.width=n.right-n.left,n.height=n.bottom-n.top}function De(i,n,r){var o=r&&i.options[r];return He(Me(o&&o.origin||i.options.origin,i,n,[i&&n]))||{x:0,y:0}}function Ee(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(h){return!0},o=arguments.length>3?arguments[3]:void 0;if(o=o||{},P.string(i)&&i.search(" ")!==-1&&(i=Dt(i)),P.array(i))return i.forEach(function(h){return Ee(h,n,r,o)}),o;if(P.object(i)&&(n=i,i=""),P.func(n)&&r(i))o[i]=o[i]||[],o[i].push(n);else if(P.array(n))for(var a=0,l=n;a<l.length;a++){var u=l[a];Ee(i,u,r,o)}else if(P.object(n))for(var p in n)Ee(Dt(p).map(function(h){return"".concat(i).concat(h)}),n[p],r,o);return o}function Dt(i){return i.trim().split(/ +/)}var je=function(i,n){return Math.sqrt(i*i+n*n)},En=["webkit","moz"];function Ke(i,n){i.__set||(i.__set={});var r=function(a){if(En.some(function(l){return a.indexOf(l)===0}))return 1;typeof i[a]!="function"&&a!=="__set"&&Object.defineProperty(i,a,{get:function(){return a in i.__set?i.__set[a]:i.__set[a]=n[a]},set:function(l){i.__set[a]=l},configurable:!0})};for(var o in n)r(o);return i}function Ye(i,n){i.page=i.page||{},i.page.x=n.page.x,i.page.y=n.page.y,i.client=i.client||{},i.client.x=n.client.x,i.client.y=n.client.y,i.timeStamp=n.timeStamp}function jt(i){i.page.x=0,i.page.y=0,i.client.x=0,i.client.y=0}function Rt(i){return i instanceof U.Event||i instanceof U.Touch}function Xe(i,n,r){return i=i||"page",(r=r||{}).x=n[i+"X"],r.y=n[i+"Y"],r}function _t(i,n){return n=n||{x:0,y:0},G.isOperaMobile&&Rt(i)?(Xe("screen",i,n),n.x+=window.scrollX,n.y+=window.scrollY):Xe("page",i,n),n}function Re(i){return P.number(i.pointerId)?i.pointerId:i.identifier}function On(i,n,r){var o=n.length>1?At(n):n[0];_t(o,i.page),function(a,l){l=l||{},G.isOperaMobile&&Rt(a)?Xe("screen",a,l):Xe("client",a,l)}(o,i.client),i.timeStamp=r}function st(i){var n=[];return P.array(i)?(n[0]=i[0],n[1]=i[1]):i.type==="touchend"?i.touches.length===1?(n[0]=i.touches[0],n[1]=i.changedTouches[0]):i.touches.length===0&&(n[0]=i.changedTouches[0],n[1]=i.changedTouches[1]):(n[0]=i.touches[0],n[1]=i.touches[1]),n}function At(i){for(var n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},r=0;r<i.length;r++){var o=i[r];for(var a in n)n[a]+=o[a]}for(var l in n)n[l]/=i.length;return n}function lt(i){if(!i.length)return null;var n=st(i),r=Math.min(n[0].pageX,n[1].pageX),o=Math.min(n[0].pageY,n[1].pageY),a=Math.max(n[0].pageX,n[1].pageX),l=Math.max(n[0].pageY,n[1].pageY);return{x:r,y:o,left:r,top:o,right:a,bottom:l,width:a-r,height:l-o}}function ct(i,n){var r=n+"X",o=n+"Y",a=st(i),l=a[0][r]-a[1][r],u=a[0][o]-a[1][o];return je(l,u)}function ut(i,n){var r=n+"X",o=n+"Y",a=st(i),l=a[1][r]-a[0][r],u=a[1][o]-a[0][o];return 180*Math.atan2(u,l)/Math.PI}function Ft(i){return P.string(i.pointerType)?i.pointerType:P.number(i.pointerType)?[void 0,void 0,"touch","pen","mouse"][i.pointerType]:/touch/.test(i.type||"")||i instanceof U.Touch?"touch":"mouse"}function Nt(i){var n=P.func(i.composedPath)?i.composedPath():i.path;return[Le(n?n[0]:i.target),Le(i.currentTarget)]}var Ge=function(){function i(n){g(this,i),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=n}return b(i,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),i}();Object.defineProperty(Ge.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var zt=function(i,n){for(var r=0;r<n.length;r++){var o=n[r];i.push(o)}return i},$t=function(i){return zt([],i)},_e=function(i,n){for(var r=0;r<i.length;r++)if(n(i[r],r,i))return r;return-1},Ae=function(i,n){return i[_e(i,n)]},ke=function(i){C(r,i);var n=D(r);function r(o,a,l){var u;g(this,r),(u=n.call(this,a._interaction)).dropzone=void 0,u.dragEvent=void 0,u.relatedTarget=void 0,u.draggable=void 0,u.propagationStopped=!1,u.immediatePropagationStopped=!1;var p=l==="dragleave"?o.prev:o.cur,h=p.element,y=p.dropzone;return u.type=l,u.target=h,u.currentTarget=h,u.dropzone=y,u.dragEvent=a,u.relatedTarget=a.target,u.draggable=a.interactable,u.timeStamp=a.timeStamp,u}return b(r,[{key:"reject",value:function(){var o=this,a=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&a.cur.dropzone===this.dropzone&&a.cur.element===this.target)if(a.prev.dropzone=this.dropzone,a.prev.element=this.target,a.rejected=!0,a.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var l=a.activeDrops,u=_e(l,function(h){var y=h.dropzone,m=h.element;return y===o.dropzone&&m===o.target});a.activeDrops.splice(u,1);var p=new r(a,this.dragEvent,"dropdeactivate");p.dropzone=this.dropzone,p.target=this.target,this.dropzone.fire(p)}else this.dropzone.fire(new r(a,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),r}(Ge);function Bt(i,n){for(var r=0,o=i.slice();r<o.length;r++){var a=o[r],l=a.dropzone,u=a.element;n.dropzone=l,n.target=u,l.fire(n),n.propagationStopped=n.immediatePropagationStopped=!1}}function dt(i,n){for(var r=function(l,u){for(var p=[],h=0,y=l.interactables.list;h<y.length;h++){var m=y[h];if(m.options.drop.enabled){var w=m.options.drop.accept;if(!(P.element(w)&&w!==u||P.string(w)&&!ue(u,w)||P.func(w)&&!w({dropzone:m,draggableElement:u})))for(var E=0,I=m.getAllElements();E<I.length;E++){var k=I[E];k!==u&&p.push({dropzone:m,element:k,rect:m.getRect(k)})}}}return p}(i,n),o=0;o<r.length;o++){var a=r[o];a.rect=a.dropzone.getRect(a.element)}return r}function Vt(i,n,r){for(var o=i.dropState,a=i.interactable,l=i.element,u=[],p=0,h=o.activeDrops;p<h.length;p++){var y=h[p],m=y.dropzone,w=y.element,E=y.rect,I=m.dropCheck(n,r,a,l,w,E);u.push(I?w:null)}var k=function(L){for(var R,j,A,$=[],W=0;W<L.length;W++){var N=L[W],V=L[R];if(N&&W!==R)if(V){var re=ee(N),X=ee(V);if(re!==N.ownerDocument)if(X!==N.ownerDocument)if(re!==X){$=$.length?$:pe(V);var le=void 0;if(V instanceof U.HTMLElement&&N instanceof U.SVGElement&&!(N instanceof U.SVGSVGElement)){if(N===X)continue;le=N.ownerSVGElement}else le=N;for(var de=pe(le,V.ownerDocument),ve=0;de[ve]&&de[ve]===$[ve];)ve++;var rt=[de[ve-1],de[ve],$[ve]];if(rt[0])for(var Ve=rt[0].lastChild;Ve;){if(Ve===rt[1]){R=W,$=de;break}if(Ve===rt[2])break;Ve=Ve.previousSibling}}else A=V,(parseInt(Y(j=N).getComputedStyle(j).zIndex,10)||0)>=(parseInt(Y(A).getComputedStyle(A).zIndex,10)||0)&&(R=W);else R=W}else R=W}return R}(u);return o.activeDrops[k]||null}function pt(i,n,r){var o=i.dropState,a={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return r.type==="dragstart"&&(a.activate=new ke(o,r,"dropactivate"),a.activate.target=null,a.activate.dropzone=null),r.type==="dragend"&&(a.deactivate=new ke(o,r,"dropdeactivate"),a.deactivate.target=null,a.deactivate.dropzone=null),o.rejected||(o.cur.element!==o.prev.element&&(o.prev.dropzone&&(a.leave=new ke(o,r,"dragleave"),r.dragLeave=a.leave.target=o.prev.element,r.prevDropzone=a.leave.dropzone=o.prev.dropzone),o.cur.dropzone&&(a.enter=new ke(o,r,"dragenter"),r.dragEnter=o.cur.element,r.dropzone=o.cur.dropzone)),r.type==="dragend"&&o.cur.dropzone&&(a.drop=new ke(o,r,"drop"),r.dropzone=o.cur.dropzone,r.relatedTarget=o.cur.element),r.type==="dragmove"&&o.cur.dropzone&&(a.move=new ke(o,r,"dropmove"),r.dropzone=o.cur.dropzone)),a}function ft(i,n){var r=i.dropState,o=r.activeDrops,a=r.cur,l=r.prev;n.leave&&l.dropzone.fire(n.leave),n.enter&&a.dropzone.fire(n.enter),n.move&&a.dropzone.fire(n.move),n.drop&&a.dropzone.fire(n.drop),n.deactivate&&Bt(o,n.deactivate),r.prev.dropzone=a.dropzone,r.prev.element=a.element}function Wt(i,n){var r=i.interaction,o=i.iEvent,a=i.event;if(o.type==="dragmove"||o.type==="dragend"){var l=r.dropState;n.dynamicDrop&&(l.activeDrops=dt(n,r.element));var u=o,p=Vt(r,u,a);l.rejected=l.rejected&&!!p&&p.dropzone===l.cur.dropzone&&p.element===l.cur.element,l.cur.dropzone=p&&p.dropzone,l.cur.element=p&&p.element,l.events=pt(r,0,u)}}var Ht={id:"actions/drop",install:function(i){var n=i.actions,r=i.interactStatic,o=i.Interactable,a=i.defaults;i.usePlugin(We),o.prototype.dropzone=function(l){return function(u,p){if(P.object(p)){if(u.options.drop.enabled=p.enabled!==!1,p.listeners){var h=Ee(p.listeners),y=Object.keys(h).reduce(function(w,E){return w[/^(enter|leave)/.test(E)?"drag".concat(E):/^(activate|deactivate|move)/.test(E)?"drop".concat(E):E]=h[E],w},{}),m=u.options.drop.listeners;m&&u.off(m),u.on(y),u.options.drop.listeners=y}return P.func(p.ondrop)&&u.on("drop",p.ondrop),P.func(p.ondropactivate)&&u.on("dropactivate",p.ondropactivate),P.func(p.ondropdeactivate)&&u.on("dropdeactivate",p.ondropdeactivate),P.func(p.ondragenter)&&u.on("dragenter",p.ondragenter),P.func(p.ondragleave)&&u.on("dragleave",p.ondragleave),P.func(p.ondropmove)&&u.on("dropmove",p.ondropmove),/^(pointer|center)$/.test(p.overlap)?u.options.drop.overlap=p.overlap:P.number(p.overlap)&&(u.options.drop.overlap=Math.max(Math.min(1,p.overlap),0)),"accept"in p&&(u.options.drop.accept=p.accept),"checker"in p&&(u.options.drop.checker=p.checker),u}return P.bool(p)?(u.options.drop.enabled=p,u):u.options.drop}(this,l)},o.prototype.dropCheck=function(l,u,p,h,y,m){return function(w,E,I,k,L,R,j){var A=!1;if(!(j=j||w.getRect(R)))return!!w.options.drop.checker&&w.options.drop.checker(E,I,A,w,R,k,L);var $=w.options.drop.overlap;if($==="pointer"){var W=De(k,L,"drag"),N=_t(E);N.x+=W.x,N.y+=W.y;var V=N.x>j.left&&N.x<j.right,re=N.y>j.top&&N.y<j.bottom;A=V&&re}var X=k.getRect(L);if(X&&$==="center"){var le=X.left+X.width/2,de=X.top+X.height/2;A=le>=j.left&&le<=j.right&&de>=j.top&&de<=j.bottom}return X&&P.number($)&&(A=Math.max(0,Math.min(j.right,X.right)-Math.max(j.left,X.left))*Math.max(0,Math.min(j.bottom,X.bottom)-Math.max(j.top,X.top))/(X.width*X.height)>=$),w.options.drop.checker&&(A=w.options.drop.checker(E,I,A,w,R,k,L)),A}(this,l,u,p,h,y,m)},r.dynamicDrop=function(l){return P.bool(l)?(i.dynamicDrop=l,r):i.dynamicDrop},F(n.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),n.methodDict.drop="dropzone",i.dynamicDrop=!1,a.actions.drop=Ht.defaults},listeners:{"interactions:before-action-start":function(i){var n=i.interaction;n.prepared.name==="drag"&&(n.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(i,n){var r=i.interaction,o=(i.event,i.iEvent);if(r.prepared.name==="drag"){var a=r.dropState;a.activeDrops=[],a.events={},a.activeDrops=dt(n,r.element),a.events=pt(r,0,o),a.events.activate&&(Bt(a.activeDrops,a.events.activate),n.fire("actions/drop:start",{interaction:r,dragEvent:o}))}},"interactions:action-move":Wt,"interactions:after-action-move":function(i,n){var r=i.interaction,o=i.iEvent;if(r.prepared.name==="drag"){var a=r.dropState;ft(r,a.events),n.fire("actions/drop:move",{interaction:r,dragEvent:o}),a.events={}}},"interactions:action-end":function(i,n){if(i.interaction.prepared.name==="drag"){var r=i.interaction,o=i.iEvent;Wt(i,n),ft(r,r.dropState.events),n.fire("actions/drop:end",{interaction:r,dragEvent:o})}},"interactions:stop":function(i){var n=i.interaction;if(n.prepared.name==="drag"){var r=n.dropState;r&&(r.activeDrops=null,r.events=null,r.cur.dropzone=null,r.cur.element=null,r.prev.dropzone=null,r.prev.element=null,r.rejected=!1)}}},getActiveDrops:dt,getDrop:Vt,getDropEvents:pt,fireDropEvents:ft,filterEventType:function(i){return i.search("drag")===0||i.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Pn=Ht;function ht(i){var n=i.interaction,r=i.iEvent,o=i.phase;if(n.prepared.name==="gesture"){var a=n.pointers.map(function(y){return y.pointer}),l=o==="start",u=o==="end",p=n.interactable.options.deltaSource;if(r.touches=[a[0],a[1]],l)r.distance=ct(a,p),r.box=lt(a),r.scale=1,r.ds=0,r.angle=ut(a,p),r.da=0,n.gesture.startDistance=r.distance,n.gesture.startAngle=r.angle;else if(u||n.pointers.length<2){var h=n.prevEvent;r.distance=h.distance,r.box=h.box,r.scale=h.scale,r.ds=0,r.angle=h.angle,r.da=0}else r.distance=ct(a,p),r.box=lt(a),r.scale=r.distance/n.gesture.startDistance,r.angle=ut(a,p),r.ds=r.scale-n.gesture.scale,r.da=r.angle-n.gesture.angle;n.gesture.distance=r.distance,n.gesture.angle=r.angle,P.number(r.scale)&&r.scale!==1/0&&!isNaN(r.scale)&&(n.gesture.scale=r.scale)}}var gt={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(i){var n=i.actions,r=i.Interactable,o=i.defaults;r.prototype.gesturable=function(a){return P.object(a)?(this.options.gesture.enabled=a.enabled!==!1,this.setPerAction("gesture",a),this.setOnEvents("gesture",a),this):P.bool(a)?(this.options.gesture.enabled=a,this):this.options.gesture},n.map.gesture=gt,n.methodDict.gesture="gesturable",o.actions.gesture=gt.defaults},listeners:{"interactions:action-start":ht,"interactions:action-move":ht,"interactions:action-end":ht,"interactions:new":function(i){i.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(i){if(!(i.interaction.pointers.length<2)){var n=i.interactable.options.gesture;if(n&&n.enabled)return i.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(i){return i.search("gesture")===0}},Tn=gt;function kn(i,n,r,o,a,l,u){if(!n)return!1;if(n===!0){var p=P.number(l.width)?l.width:l.right-l.left,h=P.number(l.height)?l.height:l.bottom-l.top;if(u=Math.min(u,Math.abs((i==="left"||i==="right"?p:h)/2)),p<0&&(i==="left"?i="right":i==="right"&&(i="left")),h<0&&(i==="top"?i="bottom":i==="bottom"&&(i="top")),i==="left"){var y=p>=0?l.left:l.right;return r.x<y+u}if(i==="top"){var m=h>=0?l.top:l.bottom;return r.y<m+u}if(i==="right")return r.x>(p>=0?l.right:l.left)-u;if(i==="bottom")return r.y>(h>=0?l.bottom:l.top)-u}return!!P.element(o)&&(P.element(n)?n===o:he(o,n,a))}function Ut(i){var n=i.iEvent,r=i.interaction;if(r.prepared.name==="resize"&&r.resizeAxes){var o=n;r.interactable.options.resize.square?(r.resizeAxes==="y"?o.delta.x=o.delta.y:o.delta.y=o.delta.x,o.axes="xy"):(o.axes=r.resizeAxes,r.resizeAxes==="x"?o.delta.y=0:r.resizeAxes==="y"&&(o.delta.x=0))}}var ge,Oe,me={id:"actions/resize",before:["actions/drag"],install:function(i){var n=i.actions,r=i.browser,o=i.Interactable,a=i.defaults;me.cursors=function(l){return l.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(r),me.defaultMargin=r.supportsTouch||r.supportsPointerEvent?20:10,o.prototype.resizable=function(l){return function(u,p,h){return P.object(p)?(u.options.resize.enabled=p.enabled!==!1,u.setPerAction("resize",p),u.setOnEvents("resize",p),P.string(p.axis)&&/^x$|^y$|^xy$/.test(p.axis)?u.options.resize.axis=p.axis:p.axis===null&&(u.options.resize.axis=h.defaults.actions.resize.axis),P.bool(p.preserveAspectRatio)?u.options.resize.preserveAspectRatio=p.preserveAspectRatio:P.bool(p.square)&&(u.options.resize.square=p.square),u):P.bool(p)?(u.options.resize.enabled=p,u):u.options.resize}(this,l,i)},n.map.resize=me,n.methodDict.resize="resizable",a.actions.resize=me.defaults},listeners:{"interactions:new":function(i){i.interaction.resizeAxes="xy"},"interactions:action-start":function(i){(function(n){var r=n.iEvent,o=n.interaction;if(o.prepared.name==="resize"&&o.prepared.edges){var a=r,l=o.rect;o._rects={start:F({},l),corrected:F({},l),previous:F({},l),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},a.edges=o.prepared.edges,a.rect=o._rects.corrected,a.deltaRect=o._rects.delta}})(i),Ut(i)},"interactions:action-move":function(i){(function(n){var r=n.iEvent,o=n.interaction;if(o.prepared.name==="resize"&&o.prepared.edges){var a=r,l=o.interactable.options.resize.invert,u=l==="reposition"||l==="negate",p=o.rect,h=o._rects,y=h.start,m=h.corrected,w=h.delta,E=h.previous;if(F(E,m),u){if(F(m,p),l==="reposition"){if(m.top>m.bottom){var I=m.top;m.top=m.bottom,m.bottom=I}if(m.left>m.right){var k=m.left;m.left=m.right,m.right=k}}}else m.top=Math.min(p.top,y.bottom),m.bottom=Math.max(p.bottom,y.top),m.left=Math.min(p.left,y.right),m.right=Math.max(p.right,y.left);for(var L in m.width=m.right-m.left,m.height=m.bottom-m.top,m)w[L]=m[L]-E[L];a.edges=o.prepared.edges,a.rect=m,a.deltaRect=w}})(i),Ut(i)},"interactions:action-end":function(i){var n=i.iEvent,r=i.interaction;if(r.prepared.name==="resize"&&r.prepared.edges){var o=n;o.edges=r.prepared.edges,o.rect=r._rects.corrected,o.deltaRect=r._rects.delta}},"auto-start:check":function(i){var n=i.interaction,r=i.interactable,o=i.element,a=i.rect,l=i.buttons;if(a){var u=F({},n.coords.cur.page),p=r.options.resize;if(p&&p.enabled&&(!n.pointerIsDown||!/mouse|pointer/.test(n.pointerType)||l&p.mouseButtons)){if(P.object(p.edges)){var h={left:!1,right:!1,top:!1,bottom:!1};for(var y in h)h[y]=kn(y,p.edges[y],u,n._latestPointer.eventTarget,o,a,p.margin||me.defaultMargin);h.left=h.left&&!h.right,h.top=h.top&&!h.bottom,(h.left||h.right||h.top||h.bottom)&&(i.action={name:"resize",edges:h})}else{var m=p.axis!=="y"&&u.x>a.right-me.defaultMargin,w=p.axis!=="x"&&u.y>a.bottom-me.defaultMargin;(m||w)&&(i.action={name:"resize",axes:(m?"x":"")+(w?"y":"")})}return!i.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(i){var n=i.edges,r=i.axis,o=i.name,a=me.cursors,l=null;if(r)l=a[o+r];else if(n){for(var u="",p=0,h=["top","bottom","left","right"];p<h.length;p++){var y=h[p];n[y]&&(u+=y)}l=a[u]}return l},filterEventType:function(i){return i.search("resize")===0},defaultMargin:null},In=me,Ln={id:"actions",install:function(i){i.usePlugin(Tn),i.usePlugin(In),i.usePlugin(We),i.usePlugin(Pn)}},Kt=0,xe={request:function(i){return ge(i)},cancel:function(i){return Oe(i)},init:function(i){if(ge=i.requestAnimationFrame,Oe=i.cancelAnimationFrame,!ge)for(var n=["ms","moz","webkit","o"],r=0;r<n.length;r++){var o=n[r];ge=i["".concat(o,"RequestAnimationFrame")],Oe=i["".concat(o,"CancelAnimationFrame")]||i["".concat(o,"CancelRequestAnimationFrame")]}ge=ge&&ge.bind(i),Oe=Oe&&Oe.bind(i),ge||(ge=function(a){var l=Date.now(),u=Math.max(0,16-(l-Kt)),p=i.setTimeout(function(){a(l+u)},u);return Kt=l+u,p},Oe=function(a){return clearTimeout(a)})}},z={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(i){z.isScrolling=!0,xe.cancel(z.i),i.autoScroll=z,z.interaction=i,z.prevTime=z.now(),z.i=xe.request(z.scroll)},stop:function(){z.isScrolling=!1,z.interaction&&(z.interaction.autoScroll=null),xe.cancel(z.i)},scroll:function(){var i=z.interaction,n=i.interactable,r=i.element,o=i.prepared.name,a=n.options[o].autoScroll,l=Yt(a.container,n,r),u=z.now(),p=(u-z.prevTime)/1e3,h=a.speed*p;if(h>=1){var y={x:z.x*h,y:z.y*h};if(y.x||y.y){var m=Xt(l);P.window(l)?l.scrollBy(y.x,y.y):l&&(l.scrollLeft+=y.x,l.scrollTop+=y.y);var w=Xt(l),E={x:w.x-m.x,y:w.y-m.y};(E.x||E.y)&&n.fire({type:"autoscroll",target:r,interactable:n,delta:E,interaction:i,container:l})}z.prevTime=u}z.isScrolling&&(xe.cancel(z.i),z.i=xe.request(z.scroll))},check:function(i,n){var r;return(r=i.options[n].autoScroll)==null?void 0:r.enabled},onInteractionMove:function(i){var n=i.interaction,r=i.pointer;if(n.interacting()&&z.check(n.interactable,n.prepared.name))if(n.simulation)z.x=z.y=0;else{var o,a,l,u,p=n.interactable,h=n.element,y=n.prepared.name,m=p.options[y].autoScroll,w=Yt(m.container,p,h);if(P.window(w))u=r.clientX<z.margin,o=r.clientY<z.margin,a=r.clientX>w.innerWidth-z.margin,l=r.clientY>w.innerHeight-z.margin;else{var E=Te(w);u=r.clientX<E.left+z.margin,o=r.clientY<E.top+z.margin,a=r.clientX>E.right-z.margin,l=r.clientY>E.bottom-z.margin}z.x=a?1:u?-1:0,z.y=l?1:o?-1:0,z.isScrolling||(z.margin=m.margin,z.speed=m.speed,z.start(n))}}};function Yt(i,n,r){return(P.string(i)?Mt(i,n,r):i)||Y(r)}function Xt(i){return P.window(i)&&(i=window.document.body),{x:i.scrollLeft,y:i.scrollTop}}var Mn={id:"auto-scroll",install:function(i){var n=i.defaults,r=i.actions;i.autoScroll=z,z.now=function(){return i.now()},r.phaselessTypes.autoscroll=!0,n.perAction.autoScroll=z.defaults},listeners:{"interactions:new":function(i){i.interaction.autoScroll=null},"interactions:destroy":function(i){i.interaction.autoScroll=null,z.stop(),z.interaction&&(z.interaction=null)},"interactions:stop":z.stop,"interactions:action-move":function(i){return z.onInteractionMove(i)}}},Dn=Mn;function Fe(i,n){var r=!1;return function(){return r||(K.console.warn(n),r=!0),i.apply(this,arguments)}}function mt(i,n){return i.name=n.name,i.axis=n.axis,i.edges=n.edges,i}function jn(i){return P.bool(i)?(this.options.styleCursor=i,this):i===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Rn(i){return P.func(i)?(this.options.actionChecker=i,this):i===null?(delete this.options.actionChecker,this):this.options.actionChecker}var _n={id:"auto-start/interactableMethods",install:function(i){var n=i.Interactable;n.prototype.getAction=function(r,o,a,l){var u=function(p,h,y,m,w){var E=p.getRect(m),I=h.buttons||{0:1,1:4,3:8,4:16}[h.button],k={action:null,interactable:p,interaction:y,element:m,rect:E,buttons:I};return w.fire("auto-start:check",k),k.action}(this,o,a,l,i);return this.options.actionChecker?this.options.actionChecker(r,o,u,this,l,a):u},n.prototype.ignoreFrom=Fe(function(r){return this._backCompatOption("ignoreFrom",r)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),n.prototype.allowFrom=Fe(function(r){return this._backCompatOption("allowFrom",r)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),n.prototype.actionChecker=Rn,n.prototype.styleCursor=jn}};function Gt(i,n,r,o,a){return n.testIgnoreAllow(n.options[i.name],r,o)&&n.options[i.name].enabled&&qe(n,r,i,a)?i:null}function An(i,n,r,o,a,l,u){for(var p=0,h=o.length;p<h;p++){var y=o[p],m=a[p],w=y.getAction(n,r,i,m);if(w){var E=Gt(w,y,m,l,u);if(E)return{action:E,interactable:y,element:m}}}return{action:null,interactable:null,element:null}}function qt(i,n,r,o,a){var l=[],u=[],p=o;function h(m){l.push(m),u.push(p)}for(;P.element(p);){l=[],u=[],a.interactables.forEachMatch(p,h);var y=An(i,n,r,l,u,o,a);if(y.action&&!y.interactable.options[y.action.name].manualStart)return y;p=se(p)}return{action:null,interactable:null,element:null}}function Jt(i,n,r){var o=n.action,a=n.interactable,l=n.element;o=o||{name:null},i.interactable=a,i.element=l,mt(i.prepared,o),i.rect=a&&o.name?a.getRect(l):null,Zt(i,r),r.fire("autoStart:prepared",{interaction:i})}function qe(i,n,r,o){var a=i.options,l=a[r.name].max,u=a[r.name].maxPerElement,p=o.autoStart.maxInteractions,h=0,y=0,m=0;if(!(l&&u&&p))return!1;for(var w=0,E=o.interactions.list;w<E.length;w++){var I=E[w],k=I.prepared.name;if(I.interacting()&&(++h>=p||I.interactable===i&&((y+=k===r.name?1:0)>=l||I.element===n&&(m++,k===r.name&&m>=u))))return!1}return p>0}function Qt(i,n){return P.number(i)?(n.autoStart.maxInteractions=i,this):n.autoStart.maxInteractions}function vt(i,n,r){var o=r.autoStart.cursorElement;o&&o!==i&&(o.style.cursor=""),i.ownerDocument.documentElement.style.cursor=n,i.style.cursor=n,r.autoStart.cursorElement=n?i:null}function Zt(i,n){var r=i.interactable,o=i.element,a=i.prepared;if(i.pointerType==="mouse"&&r&&r.options.styleCursor){var l="";if(a.name){var u=r.options[a.name].cursorChecker;l=P.func(u)?u(a,r,o,i._interacting):n.actions.map[a.name].getCursor(a)}vt(i.element,l||"",n)}else n.autoStart.cursorElement&&vt(n.autoStart.cursorElement,"",n)}var Fn={id:"auto-start/base",before:["actions"],install:function(i){var n=i.interactStatic,r=i.defaults;i.usePlugin(_n),r.base.actionChecker=null,r.base.styleCursor=!0,F(r.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),n.maxInteractions=function(o){return Qt(o,i)},i.autoStart={maxInteractions:1/0,withinInteractionLimit:qe,cursorElement:null}},listeners:{"interactions:down":function(i,n){var r=i.interaction,o=i.pointer,a=i.event,l=i.eventTarget;r.interacting()||Jt(r,qt(r,o,a,l,n),n)},"interactions:move":function(i,n){(function(r,o){var a=r.interaction,l=r.pointer,u=r.event,p=r.eventTarget;a.pointerType!=="mouse"||a.pointerIsDown||a.interacting()||Jt(a,qt(a,l,u,p,o),o)})(i,n),function(r,o){var a=r.interaction;if(a.pointerIsDown&&!a.interacting()&&a.pointerWasMoved&&a.prepared.name){o.fire("autoStart:before-start",r);var l=a.interactable,u=a.prepared.name;u&&l&&(l.options[u].manualStart||!qe(l,a.element,a.prepared,o)?a.stop():(a.start(a.prepared,l,a.element),Zt(a,o)))}}(i,n)},"interactions:stop":function(i,n){var r=i.interaction,o=r.interactable;o&&o.options.styleCursor&&vt(r.element,"",n)}},maxInteractions:Qt,withinInteractionLimit:qe,validateAction:Gt},yt=Fn,Nn={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(i,n){var r=i.interaction,o=i.eventTarget,a=i.dx,l=i.dy;if(r.prepared.name==="drag"){var u=Math.abs(a),p=Math.abs(l),h=r.interactable.options.drag,y=h.startAxis,m=u>p?"x":u<p?"y":"xy";if(r.prepared.axis=h.lockAxis==="start"?m[0]:h.lockAxis,m!=="xy"&&y!=="xy"&&y!==m){r.prepared.name=null;for(var w=o,E=function(k){if(k!==r.interactable){var L=r.interactable.options.drag;if(!L.manualStart&&k.testIgnoreAllow(L,w,o)){var R=k.getAction(r.downPointer,r.downEvent,r,w);if(R&&R.name==="drag"&&function(j,A){if(!A)return!1;var $=A.options.drag.startAxis;return j==="xy"||$==="xy"||$===j}(m,k)&&yt.validateAction(R,k,w,o,n))return k}}};P.element(w);){var I=n.interactables.forEachMatch(w,E);if(I){r.prepared.name="drag",r.interactable=I,r.element=w;break}w=se(w)}}}}}};function xt(i){var n=i.prepared&&i.prepared.name;if(!n)return null;var r=i.interactable.options;return r[n].hold||r[n].delay}var zn={id:"auto-start/hold",install:function(i){var n=i.defaults;i.usePlugin(yt),n.perAction.hold=0,n.perAction.delay=0},listeners:{"interactions:new":function(i){i.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(i){var n=i.interaction,r=xt(n);r>0&&(n.autoStartHoldTimer=setTimeout(function(){n.start(n.prepared,n.interactable,n.element)},r))},"interactions:move":function(i){var n=i.interaction,r=i.duplicate;n.autoStartHoldTimer&&n.pointerWasMoved&&!r&&(clearTimeout(n.autoStartHoldTimer),n.autoStartHoldTimer=null)},"autoStart:before-start":function(i){var n=i.interaction;xt(n)>0&&(n.prepared.name=null)}},getHoldDuration:xt},$n=zn,Bn={id:"auto-start",install:function(i){i.usePlugin(yt),i.usePlugin($n),i.usePlugin(Nn)}},Vn=function(i){return/^(always|never|auto)$/.test(i)?(this.options.preventDefault=i,this):P.bool(i)?(this.options.preventDefault=i?"always":"never",this):this.options.preventDefault};function Wn(i){var n=i.interaction,r=i.event;n.interactable&&n.interactable.checkAndPreventDefault(r)}var tn={id:"core/interactablePreventDefault",install:function(i){var n=i.Interactable;n.prototype.preventDefault=Vn,n.prototype.checkAndPreventDefault=function(r){return function(o,a,l){var u=o.options.preventDefault;if(u!=="never")if(u!=="always"){if(a.events.supportsPassive&&/^touch(start|move)$/.test(l.type)){var p=Y(l.target).document,h=a.getDocOptions(p);if(!h||!h.events||h.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(l.type)||P.element(l.target)&&ue(l.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||l.preventDefault()}else l.preventDefault()}(this,i,r)},i.interactions.docEvents.push({type:"dragstart",listener:function(r){for(var o=0,a=i.interactions.list;o<a.length;o++){var l=a[o];if(l.element&&(l.element===r.target||Z(l.element,r.target)))return void l.interactable.checkAndPreventDefault(r)}}})},listeners:["down","move","up","cancel"].reduce(function(i,n){return i["interactions:".concat(n)]=Wn,i},{})};function Je(i,n){if(n.phaselessTypes[i])return!0;for(var r in n.map)if(i.indexOf(r)===0&&i.substr(r.length)in n.phases)return!0;return!1}function Ie(i){var n={};for(var r in i){var o=i[r];P.plainObject(o)?n[r]=Ie(o):P.array(o)?n[r]=$t(o):n[r]=o}return n}var bt=function(){function i(n){g(this,i),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=n,this.result=Qe(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return b(i,[{key:"start",value:function(n,r){var o,a,l=n.phase,u=this.interaction,p=function(y){var m=y.interactable.options[y.prepared.name],w=m.modifiers;return w&&w.length?w:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(E){var I=m[E];return I&&I.enabled&&{options:I,methods:I._methods}}).filter(function(E){return!!E})}(u);this.prepareStates(p),this.startEdges=F({},u.edges),this.edges=F({},this.startEdges),this.startOffset=(o=u.rect,a=r,o?{left:a.x-o.left,top:a.y-o.top,right:o.right-a.x,bottom:o.bottom-a.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var h=this.fillArg({phase:l,pageCoords:r,preEnd:!1});return this.result=Qe(),this.startAll(h),this.result=this.setAll(h)}},{key:"fillArg",value:function(n){var r=this.interaction;return n.interaction=r,n.interactable=r.interactable,n.element=r.element,n.rect||(n.rect=r.rect),n.edges||(n.edges=this.startEdges),n.startOffset=this.startOffset,n}},{key:"startAll",value:function(n){for(var r=0,o=this.states;r<o.length;r++){var a=o[r];a.methods.start&&(n.state=a,a.methods.start(n))}}},{key:"setAll",value:function(n){var r=n.phase,o=n.preEnd,a=n.skipModifiers,l=n.rect,u=n.edges;n.coords=F({},n.pageCoords),n.rect=F({},l),n.edges=F({},u);for(var p=a?this.states.slice(a):this.states,h=Qe(n.coords,n.rect),y=0;y<p.length;y++){var m,w=p[y],E=w.options,I=F({},n.coords),k=null;(m=w.methods)!=null&&m.set&&this.shouldDo(E,o,r)&&(n.state=w,k=w.methods.set(n),Ue(n.edges,n.rect,{x:n.coords.x-I.x,y:n.coords.y-I.y})),h.eventProps.push(k)}F(this.edges,n.edges),h.delta.x=n.coords.x-n.pageCoords.x,h.delta.y=n.coords.y-n.pageCoords.y,h.rectDelta.left=n.rect.left-l.left,h.rectDelta.right=n.rect.right-l.right,h.rectDelta.top=n.rect.top-l.top,h.rectDelta.bottom=n.rect.bottom-l.bottom;var L=this.result.coords,R=this.result.rect;if(L&&R){var j=h.rect.left!==R.left||h.rect.right!==R.right||h.rect.top!==R.top||h.rect.bottom!==R.bottom;h.changed=j||L.x!==h.coords.x||L.y!==h.coords.y}return h}},{key:"applyToInteraction",value:function(n){var r=this.interaction,o=n.phase,a=r.coords.cur,l=r.coords.start,u=this.result,p=this.startDelta,h=u.delta;o==="start"&&F(this.startDelta,u.delta);for(var y=0,m=[[l,p],[a,h]];y<m.length;y++){var w=m[y],E=w[0],I=w[1];E.page.x+=I.x,E.page.y+=I.y,E.client.x+=I.x,E.client.y+=I.y}var k=this.result.rectDelta,L=n.rect||r.rect;L.left+=k.left,L.right+=k.right,L.top+=k.top,L.bottom+=k.bottom,L.width=L.right-L.left,L.height=L.bottom-L.top}},{key:"setAndApply",value:function(n){var r=this.interaction,o=n.phase,a=n.preEnd,l=n.skipModifiers,u=this.setAll(this.fillArg({preEnd:a,phase:o,pageCoords:n.modifiedCoords||r.coords.cur.page}));if(this.result=u,!u.changed&&(!l||l<this.states.length)&&r.interacting())return!1;if(n.modifiedCoords){var p=r.coords.cur.page,h={x:n.modifiedCoords.x-p.x,y:n.modifiedCoords.y-p.y};u.coords.x+=h.x,u.coords.y+=h.y,u.delta.x+=h.x,u.delta.y+=h.y}this.applyToInteraction(n)}},{key:"beforeEnd",value:function(n){var r=n.interaction,o=n.event,a=this.states;if(a&&a.length){for(var l=!1,u=0;u<a.length;u++){var p=a[u];n.state=p;var h=p.options,y=p.methods,m=y.beforeEnd&&y.beforeEnd(n);if(m)return this.endResult=m,!1;l=l||!l&&this.shouldDo(h,!0,n.phase,!0)}l&&r.move({event:o,preEnd:!0})}}},{key:"stop",value:function(n){var r=n.interaction;if(this.states&&this.states.length){var o=F({states:this.states,interactable:r.interactable,element:r.element,rect:null},n);this.fillArg(o);for(var a=0,l=this.states;a<l.length;a++){var u=l[a];o.state=u,u.methods.stop&&u.methods.stop(o)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(n){this.states=[];for(var r=0;r<n.length;r++){var o=n[r],a=o.options,l=o.methods,u=o.name;this.states.push({options:a,methods:l,index:r,name:u})}return this.states}},{key:"restoreInteractionCoords",value:function(n){var r=n.interaction,o=r.coords,a=r.rect,l=r.modification;if(l.result){for(var u=l.startDelta,p=l.result,h=p.delta,y=p.rectDelta,m=0,w=[[o.start,u],[o.cur,h]];m<w.length;m++){var E=w[m],I=E[0],k=E[1];I.page.x-=k.x,I.page.y-=k.y,I.client.x-=k.x,I.client.y-=k.y}a.left-=y.left,a.right-=y.right,a.top-=y.top,a.bottom-=y.bottom}}},{key:"shouldDo",value:function(n,r,o,a){return!(!n||n.enabled===!1||a&&!n.endOnly||n.endOnly&&!r||o==="start"&&!n.setStart)}},{key:"copyFrom",value:function(n){this.startOffset=n.startOffset,this.startDelta=n.startDelta,this.startEdges=n.startEdges,this.edges=n.edges,this.states=n.states.map(function(r){return Ie(r)}),this.result=Qe(F({},n.result.coords),F({},n.result.rect))}},{key:"destroy",value:function(){for(var n in this)this[n]=null}}]),i}();function Qe(i,n){return{rect:n,coords:i,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function be(i,n){var r=i.defaults,o={start:i.start,set:i.set,beforeEnd:i.beforeEnd,stop:i.stop},a=function(l){var u=l||{};for(var p in u.enabled=u.enabled!==!1,r)p in u||(u[p]=r[p]);var h={options:u,methods:o,name:n,enable:function(){return u.enabled=!0,h},disable:function(){return u.enabled=!1,h}};return h};return n&&typeof n=="string"&&(a._defaults=r,a._methods=o),a}function Ne(i){var n=i.iEvent,r=i.interaction.modification.result;r&&(n.modifiers=r.eventProps)}var Hn={id:"modifiers/base",before:["actions"],install:function(i){i.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(i){var n=i.interaction;n.modification=new bt(n)},"interactions:before-action-start":function(i){var n=i.interaction,r=i.interaction.modification;r.start(i,n.coords.start.page),n.edges=r.edges,r.applyToInteraction(i)},"interactions:before-action-move":function(i){var n=i.interaction,r=n.modification,o=r.setAndApply(i);return n.edges=r.edges,o},"interactions:before-action-end":function(i){var n=i.interaction,r=n.modification,o=r.beforeEnd(i);return n.edges=r.startEdges,o},"interactions:action-start":Ne,"interactions:action-move":Ne,"interactions:action-end":Ne,"interactions:after-action-start":function(i){return i.interaction.modification.restoreInteractionCoords(i)},"interactions:after-action-move":function(i){return i.interaction.modification.restoreInteractionCoords(i)},"interactions:stop":function(i){return i.interaction.modification.stop(i)}}},nn=Hn,rn={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},wt=function(i){C(r,i);var n=D(r);function r(o,a,l,u,p,h,y){var m;g(this,r),(m=n.call(this,o)).relatedTarget=null,m.screenX=void 0,m.screenY=void 0,m.button=void 0,m.buttons=void 0,m.ctrlKey=void 0,m.shiftKey=void 0,m.altKey=void 0,m.metaKey=void 0,m.page=void 0,m.client=void 0,m.delta=void 0,m.rect=void 0,m.x0=void 0,m.y0=void 0,m.t0=void 0,m.dt=void 0,m.duration=void 0,m.clientX0=void 0,m.clientY0=void 0,m.velocity=void 0,m.speed=void 0,m.swipe=void 0,m.axes=void 0,m.preEnd=void 0,p=p||o.element;var w=o.interactable,E=(w&&w.options||rn).deltaSource,I=De(w,p,l),k=u==="start",L=u==="end",R=k?_(m):o.prevEvent,j=k?o.coords.start:L?{page:R.page,client:R.client,timeStamp:o.coords.cur.timeStamp}:o.coords.cur;return m.page=F({},j.page),m.client=F({},j.client),m.rect=F({},o.rect),m.timeStamp=j.timeStamp,L||(m.page.x-=I.x,m.page.y-=I.y,m.client.x-=I.x,m.client.y-=I.y),m.ctrlKey=a.ctrlKey,m.altKey=a.altKey,m.shiftKey=a.shiftKey,m.metaKey=a.metaKey,m.button=a.button,m.buttons=a.buttons,m.target=p,m.currentTarget=p,m.preEnd=h,m.type=y||l+(u||""),m.interactable=w,m.t0=k?o.pointers[o.pointers.length-1].downTime:R.t0,m.x0=o.coords.start.page.x-I.x,m.y0=o.coords.start.page.y-I.y,m.clientX0=o.coords.start.client.x-I.x,m.clientY0=o.coords.start.client.y-I.y,m.delta=k||L?{x:0,y:0}:{x:m[E].x-R[E].x,y:m[E].y-R[E].y},m.dt=o.coords.delta.timeStamp,m.duration=m.timeStamp-m.t0,m.velocity=F({},o.coords.velocity[E]),m.speed=je(m.velocity.x,m.velocity.y),m.swipe=L||u==="inertiastart"?m.getSwipe():null,m}return b(r,[{key:"getSwipe",value:function(){var o=this._interaction;if(o.prevEvent.speed<600||this.timeStamp-o.prevEvent.timeStamp>150)return null;var a=180*Math.atan2(o.prevEvent.velocityY,o.prevEvent.velocityX)/Math.PI;a<0&&(a+=360);var l=112.5<=a&&a<247.5,u=202.5<=a&&a<337.5;return{up:u,down:!u&&22.5<=a&&a<157.5,left:l,right:!l&&(292.5<=a||a<67.5),angle:a,speed:o.prevEvent.speed,velocity:{x:o.prevEvent.velocityX,y:o.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),r}(Ge);Object.defineProperties(wt.prototype,{pageX:{get:function(){return this.page.x},set:function(i){this.page.x=i}},pageY:{get:function(){return this.page.y},set:function(i){this.page.y=i}},clientX:{get:function(){return this.client.x},set:function(i){this.client.x=i}},clientY:{get:function(){return this.client.y},set:function(i){this.client.y=i}},dx:{get:function(){return this.delta.x},set:function(i){this.delta.x=i}},dy:{get:function(){return this.delta.y},set:function(i){this.delta.y=i}},velocityX:{get:function(){return this.velocity.x},set:function(i){this.velocity.x=i}},velocityY:{get:function(){return this.velocity.y},set:function(i){this.velocity.y=i}}});var Un=b(function i(n,r,o,a,l){g(this,i),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=n,this.pointer=r,this.event=o,this.downTime=a,this.downTarget=l}),Kn=function(i){return i.interactable="",i.element="",i.prepared="",i.pointerIsDown="",i.pointerWasMoved="",i._proxy="",i}({}),on=function(i){return i.start="",i.move="",i.end="",i.stop="",i.interacting="",i}({}),Yn=0,Xn=function(){function i(n){var r=this,o=n.pointerType,a=n.scopeFire;g(this,i),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Fe(function(m){this.move(m)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Yn++,this._scopeFire=a,this.pointerType=o;var l=this;this._proxy={};var u=function(m){Object.defineProperty(r._proxy,m,{get:function(){return l[m]}})};for(var p in Kn)u(p);var h=function(m){Object.defineProperty(r._proxy,m,{value:function(){return l[m].apply(l,arguments)}})};for(var y in on)h(y);this._scopeFire("interactions:new",{interaction:this})}return b(i,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(n,r,o){var a=this.updatePointer(n,r,o,!0),l=this.pointers[a];this._scopeFire("interactions:down",{pointer:n,event:r,eventTarget:o,pointerIndex:a,pointerInfo:l,type:"down",interaction:this})}},{key:"start",value:function(n,r,o){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(n.name==="gesture"?2:1)||!r.options[n.name].enabled)&&(mt(this.prepared,n),this.interactable=r,this.element=o,this.rect=r.getRect(o),this.edges=this.prepared.edges?F({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(n,r,o){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(n,r,o,!1);var a,l,u=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(a=this.coords.cur.client.x-this.coords.start.client.x,l=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=je(a,l)>this.pointerMoveTolerance);var p,h,y,m=this.getPointerIndex(n),w={pointer:n,pointerIndex:m,pointerInfo:this.pointers[m],event:r,type:"move",eventTarget:o,dx:a,dy:l,duplicate:u,interaction:this};u||(p=this.coords.velocity,h=this.coords.delta,y=Math.max(h.timeStamp/1e3,.001),p.page.x=h.page.x/y,p.page.y=h.page.y/y,p.client.x=h.client.x/y,p.client.y=h.client.y/y,p.timeStamp=y),this._scopeFire("interactions:move",w),u||this.simulation||(this.interacting()&&(w.type=null,this.move(w)),this.pointerWasMoved&&Ye(this.coords.prev,this.coords.cur))}},{key:"move",value:function(n){n&&n.event||jt(this.coords.delta),(n=F({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},n||{})).phase="move",this._doPhase(n)}},{key:"pointerUp",value:function(n,r,o,a){var l=this.getPointerIndex(n);l===-1&&(l=this.updatePointer(n,r,o,!1));var u=/cancel$/i.test(r.type)?"cancel":"up";this._scopeFire("interactions:".concat(u),{pointer:n,pointerIndex:l,pointerInfo:this.pointers[l],event:r,eventTarget:o,type:u,curEventTarget:a,interaction:this}),this.simulation||this.end(r),this.removePointer(n,r)}},{key:"documentBlur",value:function(n){this.end(n),this._scopeFire("interactions:blur",{event:n,type:"blur",interaction:this})}},{key:"end",value:function(n){var r;this._ending=!0,n=n||this._latestPointer.event,this.interacting()&&(r=this._doPhase({event:n,interaction:this,phase:"end"})),this._ending=!1,r===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(n){var r=Re(n);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:_e(this.pointers,function(o){return o.id===r})}},{key:"getPointerInfo",value:function(n){return this.pointers[this.getPointerIndex(n)]}},{key:"updatePointer",value:function(n,r,o,a){var l,u,p,h=Re(n),y=this.getPointerIndex(n),m=this.pointers[y];return a=a!==!1&&(a||/(down|start)$/i.test(r.type)),m?m.pointer=n:(m=new Un(h,n,r,null,null),y=this.pointers.length,this.pointers.push(m)),On(this.coords.cur,this.pointers.map(function(w){return w.pointer}),this._now()),l=this.coords.delta,u=this.coords.prev,p=this.coords.cur,l.page.x=p.page.x-u.page.x,l.page.y=p.page.y-u.page.y,l.client.x=p.client.x-u.client.x,l.client.y=p.client.y-u.client.y,l.timeStamp=p.timeStamp-u.timeStamp,a&&(this.pointerIsDown=!0,m.downTime=this.coords.cur.timeStamp,m.downTarget=o,Ke(this.downPointer,n),this.interacting()||(Ye(this.coords.start,this.coords.cur),Ye(this.coords.prev,this.coords.cur),this.downEvent=r,this.pointerWasMoved=!1)),this._updateLatestPointer(n,r,o),this._scopeFire("interactions:update-pointer",{pointer:n,event:r,eventTarget:o,down:a,pointerInfo:m,pointerIndex:y,interaction:this}),y}},{key:"removePointer",value:function(n,r){var o=this.getPointerIndex(n);if(o!==-1){var a=this.pointers[o];this._scopeFire("interactions:remove-pointer",{pointer:n,event:r,eventTarget:null,pointerIndex:o,pointerInfo:a,interaction:this}),this.pointers.splice(o,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(n,r,o){this._latestPointer.pointer=n,this._latestPointer.event=r,this._latestPointer.eventTarget=o}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(n,r,o,a){return new wt(this,n,this.prepared.name,r,this.element,o,a)}},{key:"_fireEvent",value:function(n){var r;(r=this.interactable)==null||r.fire(n),(!this.prevEvent||n.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=n)}},{key:"_doPhase",value:function(n){var r=n.event,o=n.phase,a=n.preEnd,l=n.type,u=this.rect;if(u&&o==="move"&&(Ue(this.edges,u,this.coords.delta[this.interactable.options.deltaSource]),u.width=u.right-u.left,u.height=u.bottom-u.top),this._scopeFire("interactions:before-action-".concat(o),n)===!1)return!1;var p=n.iEvent=this._createPreparedEvent(r,o,a,l);return this._scopeFire("interactions:action-".concat(o),n),o==="start"&&(this.prevEvent=p),this._fireEvent(p),this._scopeFire("interactions:after-action-".concat(o),n),!0}},{key:"_now",value:function(){return Date.now()}}]),i}();function an(i){sn(i.interaction)}function sn(i){if(!function(r){return!(!r.offset.pending.x&&!r.offset.pending.y)}(i))return!1;var n=i.offset.pending;return St(i.coords.cur,n),St(i.coords.delta,n),Ue(i.edges,i.rect,n),n.x=0,n.y=0,!0}function Gn(i){var n=i.x,r=i.y;this.offset.pending.x+=n,this.offset.pending.y+=r,this.offset.total.x+=n,this.offset.total.y+=r}function St(i,n){var r=i.page,o=i.client,a=n.x,l=n.y;r.x+=a,r.y+=l,o.x+=a,o.y+=l}on.offsetBy="";var qn={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(i){i.Interaction.prototype.offsetBy=Gn},listeners:{"interactions:new":function(i){i.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(i){return function(n){n.pointerIsDown&&(St(n.coords.cur,n.offset.total),n.offset.pending.x=0,n.offset.pending.y=0)}(i.interaction)},"interactions:before-action-start":an,"interactions:before-action-move":an,"interactions:before-action-end":function(i){var n=i.interaction;if(sn(n))return n.move({offset:!0}),n.end(),!1},"interactions:stop":function(i){var n=i.interaction;n.offset.total.x=0,n.offset.total.y=0,n.offset.pending.x=0,n.offset.pending.y=0}}},ln=qn,Jn=function(){function i(n){g(this,i),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=n}return b(i,[{key:"start",value:function(n){var r=this.interaction,o=Ze(r);if(!o||!o.enabled)return!1;var a=r.coords.velocity.client,l=je(a.x,a.y),u=this.modification||(this.modification=new bt(r));if(u.copyFrom(r.modification),this.t0=r._now(),this.allowResume=o.allowResume,this.v0=l,this.currentOffset={x:0,y:0},this.startCoords=r.coords.cur.page,this.modifierArg=u.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-r.coords.cur.timeStamp<50&&l>o.minSpeed&&l>o.endSpeed)this.startInertia();else{if(u.result=u.setAll(this.modifierArg),!u.result.changed)return!1;this.startSmoothEnd()}return r.modification.result.rect=null,r.offsetBy(this.targetOffset),r._doPhase({interaction:r,event:n,phase:"inertiastart"}),r.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),r.modification.result.rect=null,this.active=!0,r.simulation=this,!0}},{key:"startInertia",value:function(){var n=this,r=this.interaction.coords.velocity.client,o=Ze(this.interaction),a=o.resistance,l=-Math.log(o.endSpeed/this.v0)/a;this.targetOffset={x:(r.x-l)/a,y:(r.y-l)/a},this.te=l,this.lambda_v0=a/this.v0,this.one_ve_v0=1-o.endSpeed/this.v0;var u=this.modification,p=this.modifierArg;p.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},u.result=u.setAll(p),u.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+u.result.delta.x,y:this.targetOffset.y+u.result.delta.y}),this.onNextFrame(function(){return n.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var n=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return n.smoothEndTick()})}},{key:"onNextFrame",value:function(n){var r=this;this.timeout=xe.request(function(){r.active&&n()})}},{key:"inertiaTick",value:function(){var n,r,o,a,l,u,p,h=this,y=this.interaction,m=Ze(y).resistance,w=(y._now()-this.t0)/1e3;if(w<this.te){var E,I=1-(Math.exp(-m*w)-this.lambda_v0)/this.one_ve_v0;this.isModified?(n=0,r=0,o=this.targetOffset.x,a=this.targetOffset.y,l=this.modifiedOffset.x,u=this.modifiedOffset.y,E={x:cn(p=I,n,o,l),y:cn(p,r,a,u)}):E={x:this.targetOffset.x*I,y:this.targetOffset.y*I};var k={x:E.x-this.currentOffset.x,y:E.y-this.currentOffset.y};this.currentOffset.x+=k.x,this.currentOffset.y+=k.y,y.offsetBy(k),y.move(),this.onNextFrame(function(){return h.inertiaTick()})}else y.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var n=this,r=this.interaction,o=r._now()-this.t0,a=Ze(r).smoothEndDuration;if(o<a){var l={x:un(o,0,this.targetOffset.x,a),y:un(o,0,this.targetOffset.y,a)},u={x:l.x-this.currentOffset.x,y:l.y-this.currentOffset.y};this.currentOffset.x+=u.x,this.currentOffset.y+=u.y,r.offsetBy(u),r.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return n.smoothEndTick()})}else r.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(n){var r=n.pointer,o=n.event,a=n.eventTarget,l=this.interaction;l.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),l.updatePointer(r,o,a,!0),l._doPhase({interaction:l,event:o,phase:"resume"}),Ye(l.coords.prev,l.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,xe.cancel(this.timeout)}}]),i}();function Ze(i){var n=i.interactable,r=i.prepared;return n&&n.options&&r.name&&n.options[r.name].inertia}var Qn={id:"inertia",before:["modifiers","actions"],install:function(i){var n=i.defaults;i.usePlugin(ln),i.usePlugin(nn),i.actions.phases.inertiastart=!0,i.actions.phases.resume=!0,n.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(i){var n=i.interaction;n.inertia=new Jn(n)},"interactions:before-action-end":function(i){var n=i.interaction,r=i.event;return(!n._interacting||n.simulation||!n.inertia.start(r))&&null},"interactions:down":function(i){var n=i.interaction,r=i.eventTarget,o=n.inertia;if(o.active)for(var a=r;P.element(a);){if(a===n.element){o.resume(i);break}a=se(a)}},"interactions:stop":function(i){var n=i.interaction.inertia;n.active&&n.stop()},"interactions:before-action-resume":function(i){var n=i.interaction.modification;n.stop(i),n.start(i,i.interaction.coords.cur.page),n.applyToInteraction(i)},"interactions:before-action-inertiastart":function(i){return i.interaction.modification.setAndApply(i)},"interactions:action-resume":Ne,"interactions:action-inertiastart":Ne,"interactions:after-action-inertiastart":function(i){return i.interaction.modification.restoreInteractionCoords(i)},"interactions:after-action-resume":function(i){return i.interaction.modification.restoreInteractionCoords(i)}}};function cn(i,n,r,o){var a=1-i;return a*a*n+2*a*i*r+i*i*o}function un(i,n,r,o){return-r*(i/=o)*(i-2)+n}var Zn=Qn;function dn(i,n){for(var r=0;r<n.length;r++){var o=n[r];if(i.immediatePropagationStopped)break;o(i)}}var pn=function(){function i(n){g(this,i),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=F({},n||{})}return b(i,[{key:"fire",value:function(n){var r,o=this.global;(r=this.types[n.type])&&dn(n,r),!n.propagationStopped&&o&&(r=o[n.type])&&dn(n,r)}},{key:"on",value:function(n,r){var o=Ee(n,r);for(n in o)this.types[n]=zt(this.types[n]||[],o[n])}},{key:"off",value:function(n,r){var o=Ee(n,r);for(n in o){var a=this.types[n];if(a&&a.length)for(var l=0,u=o[n];l<u.length;l++){var p=u[l],h=a.indexOf(p);h!==-1&&a.splice(h,1)}}}},{key:"getRect",value:function(n){return null}}]),i}(),ei=function(){function i(n){g(this,i),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=n,Ke(this,n)}return b(i,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),i}();function ze(i){return P.object(i)?{capture:!!i.capture,passive:!!i.passive}:{capture:!!i,passive:!1}}function et(i,n){return i===n||(typeof i=="boolean"?!!n.capture===i&&!n.passive:!!i.capture==!!n.capture&&!!i.passive==!!n.passive)}var ti={id:"events",install:function(i){var n,r=[],o={},a=[],l={add:u,remove:p,addDelegate:function(m,w,E,I,k){var L=ze(k);if(!o[E]){o[E]=[];for(var R=0;R<a.length;R++){var j=a[R];u(j,E,h),u(j,E,y,!0)}}var A=o[E],$=Ae(A,function(W){return W.selector===m&&W.context===w});$||($={selector:m,context:w,listeners:[]},A.push($)),$.listeners.push({func:I,options:L})},removeDelegate:function(m,w,E,I,k){var L,R=ze(k),j=o[E],A=!1;if(j)for(L=j.length-1;L>=0;L--){var $=j[L];if($.selector===m&&$.context===w){for(var W=$.listeners,N=W.length-1;N>=0;N--){var V=W[N];if(V.func===I&&et(V.options,R)){W.splice(N,1),W.length||(j.splice(L,1),p(w,E,h),p(w,E,y,!0)),A=!0;break}}if(A)break}}},delegateListener:h,delegateUseCapture:y,delegatedEvents:o,documents:a,targets:r,supportsOptions:!1,supportsPassive:!1};function u(m,w,E,I){if(m.addEventListener){var k=ze(I),L=Ae(r,function(R){return R.eventTarget===m});L||(L={eventTarget:m,events:{}},r.push(L)),L.events[w]||(L.events[w]=[]),Ae(L.events[w],function(R){return R.func===E&&et(R.options,k)})||(m.addEventListener(w,E,l.supportsOptions?k:k.capture),L.events[w].push({func:E,options:k}))}}function p(m,w,E,I){if(m.addEventListener&&m.removeEventListener){var k=_e(r,function(re){return re.eventTarget===m}),L=r[k];if(L&&L.events)if(w!=="all"){var R=!1,j=L.events[w];if(j){if(E==="all"){for(var A=j.length-1;A>=0;A--){var $=j[A];p(m,w,$.func,$.options)}return}for(var W=ze(I),N=0;N<j.length;N++){var V=j[N];if(V.func===E&&et(V.options,W)){m.removeEventListener(w,E,l.supportsOptions?W:W.capture),j.splice(N,1),j.length===0&&(delete L.events[w],R=!0);break}}}R&&!Object.keys(L.events).length&&r.splice(k,1)}else for(w in L.events)L.events.hasOwnProperty(w)&&p(m,w,"all")}}function h(m,w){for(var E=ze(w),I=new ei(m),k=o[m.type],L=Nt(m)[0],R=L;P.element(R);){for(var j=0;j<k.length;j++){var A=k[j],$=A.selector,W=A.context;if(ue(R,$)&&Z(W,L)&&Z(W,R)){var N=A.listeners;I.currentTarget=R;for(var V=0;V<N.length;V++){var re=N[V];et(re.options,E)&&re.func(I)}}}R=se(R)}}function y(m){return h(m,!0)}return(n=i.document)==null||n.createElement("div").addEventListener("test",null,{get capture(){return l.supportsOptions=!0},get passive(){return l.supportsPassive=!0}}),i.events=l,l}},Ct={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(i){for(var n=0,r=Ct.methodOrder;n<r.length;n++){var o=r[n],a=Ct[o](i);if(a)return a}return null},simulationResume:function(i){var n=i.pointerType,r=i.eventType,o=i.eventTarget,a=i.scope;if(!/down|start/i.test(r))return null;for(var l=0,u=a.interactions.list;l<u.length;l++){var p=u[l],h=o;if(p.simulation&&p.simulation.allowResume&&p.pointerType===n)for(;h;){if(h===p.element)return p;h=se(h)}}return null},mouseOrPen:function(i){var n,r=i.pointerId,o=i.pointerType,a=i.eventType,l=i.scope;if(o!=="mouse"&&o!=="pen")return null;for(var u=0,p=l.interactions.list;u<p.length;u++){var h=p[u];if(h.pointerType===o){if(h.simulation&&!fn(h,r))continue;if(h.interacting())return h;n||(n=h)}}if(n)return n;for(var y=0,m=l.interactions.list;y<m.length;y++){var w=m[y];if(!(w.pointerType!==o||/down/i.test(a)&&w.simulation))return w}return null},hasPointer:function(i){for(var n=i.pointerId,r=0,o=i.scope.interactions.list;r<o.length;r++){var a=o[r];if(fn(a,n))return a}return null},idle:function(i){for(var n=i.pointerType,r=0,o=i.scope.interactions.list;r<o.length;r++){var a=o[r];if(a.pointers.length===1){var l=a.interactable;if(l&&(!l.options.gesture||!l.options.gesture.enabled))continue}else if(a.pointers.length>=2)continue;if(!a.interacting()&&n===a.pointerType)return a}return null}};function fn(i,n){return i.pointers.some(function(r){return r.id===n})}var ni=Ct,Et=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function hn(i,n){return function(r){var o=n.interactions.list,a=Ft(r),l=Nt(r),u=l[0],p=l[1],h=[];if(/^touch/.test(r.type)){n.prevTouchTime=n.now();for(var y=0,m=r.changedTouches;y<m.length;y++){var w=m[y],E={pointer:w,pointerId:Re(w),pointerType:a,eventType:r.type,eventTarget:u,curEventTarget:p,scope:n},I=gn(E);h.push([E.pointer,E.eventTarget,E.curEventTarget,I])}}else{var k=!1;if(!G.supportsPointerEvent&&/mouse/.test(r.type)){for(var L=0;L<o.length&&!k;L++)k=o[L].pointerType!=="mouse"&&o[L].pointerIsDown;k=k||n.now()-n.prevTouchTime<500||r.timeStamp===0}if(!k){var R={pointer:r,pointerId:Re(r),pointerType:a,eventType:r.type,curEventTarget:p,eventTarget:u,scope:n},j=gn(R);h.push([R.pointer,R.eventTarget,R.curEventTarget,j])}}for(var A=0;A<h.length;A++){var $=h[A],W=$[0],N=$[1],V=$[2];$[3][i](W,r,N,V)}}}function gn(i){var n=i.pointerType,r=i.scope,o={interaction:ni.search(i),searchDetails:i};return r.fire("interactions:find",o),o.interaction||r.interactions.new({pointerType:n})}function Ot(i,n){var r=i.doc,o=i.scope,a=i.options,l=o.interactions.docEvents,u=o.events,p=u[n];for(var h in o.browser.isIOS&&!a.events&&(a.events={passive:!1}),u.delegatedEvents)p(r,h,u.delegateListener),p(r,h,u.delegateUseCapture,!0);for(var y=a&&a.events,m=0;m<l.length;m++){var w=l[m];p(r,w.type,w.listener,y)}}var ii={id:"core/interactions",install:function(i){for(var n={},r=0;r<Et.length;r++){var o=Et[r];n[o]=hn(o,i)}var a,l=G.pEventTypes;function u(){for(var p=0,h=i.interactions.list;p<h.length;p++){var y=h[p];if(y.pointerIsDown&&y.pointerType==="touch"&&!y._interacting)for(var m=function(){var I=E[w];i.documents.some(function(k){return Z(k.doc,I.downTarget)})||y.removePointer(I.pointer,I.event)},w=0,E=y.pointers;w<E.length;w++)m()}}(a=U.PointerEvent?[{type:l.down,listener:u},{type:l.down,listener:n.pointerDown},{type:l.move,listener:n.pointerMove},{type:l.up,listener:n.pointerUp},{type:l.cancel,listener:n.pointerUp}]:[{type:"mousedown",listener:n.pointerDown},{type:"mousemove",listener:n.pointerMove},{type:"mouseup",listener:n.pointerUp},{type:"touchstart",listener:u},{type:"touchstart",listener:n.pointerDown},{type:"touchmove",listener:n.pointerMove},{type:"touchend",listener:n.pointerUp},{type:"touchcancel",listener:n.pointerUp}]).push({type:"blur",listener:function(p){for(var h=0,y=i.interactions.list;h<y.length;h++)y[h].documentBlur(p)}}),i.prevTouchTime=0,i.Interaction=function(p){C(y,p);var h=D(y);function y(){return g(this,y),h.apply(this,arguments)}return b(y,[{key:"pointerMoveTolerance",get:function(){return i.interactions.pointerMoveTolerance},set:function(m){i.interactions.pointerMoveTolerance=m}},{key:"_now",value:function(){return i.now()}}]),y}(Xn),i.interactions={list:[],new:function(p){p.scopeFire=function(y,m){return i.fire(y,m)};var h=new i.Interaction(p);return i.interactions.list.push(h),h},listeners:n,docEvents:a,pointerMoveTolerance:1},i.usePlugin(tn)},listeners:{"scope:add-document":function(i){return Ot(i,"add")},"scope:remove-document":function(i){return Ot(i,"remove")},"interactable:unset":function(i,n){for(var r=i.interactable,o=n.interactions.list.length-1;o>=0;o--){var a=n.interactions.list[o];a.interactable===r&&(a.stop(),n.fire("interactions:destroy",{interaction:a}),a.destroy(),n.interactions.list.length>2&&n.interactions.list.splice(o,1))}}},onDocSignal:Ot,doOnInteractions:hn,methodNames:Et},ri=ii,we=function(i){return i[i.On=0]="On",i[i.Off=1]="Off",i}(we||{}),oi=function(){function i(n,r,o,a){g(this,i),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new pn,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=r.actions,this.target=n,this._context=r.context||o,this._win=Y(Lt(n)?this._context:n),this._doc=this._win.document,this._scopeEvents=a,this.set(r)}return b(i,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(n,r){return P.func(r.onstart)&&this.on("".concat(n,"start"),r.onstart),P.func(r.onmove)&&this.on("".concat(n,"move"),r.onmove),P.func(r.onend)&&this.on("".concat(n,"end"),r.onend),P.func(r.oninertiastart)&&this.on("".concat(n,"inertiastart"),r.oninertiastart),this}},{key:"updatePerActionListeners",value:function(n,r,o){var a,l=this,u=(a=this._actions.map[n])==null?void 0:a.filterEventType,p=function(h){return(u==null||u(h))&&Je(h,l._actions)};(P.array(r)||P.object(r))&&this._onOff(we.Off,n,r,void 0,p),(P.array(o)||P.object(o))&&this._onOff(we.On,n,o,void 0,p)}},{key:"setPerAction",value:function(n,r){var o=this._defaults;for(var a in r){var l=a,u=this.options[n],p=r[l];l==="listeners"&&this.updatePerActionListeners(n,u.listeners,p),P.array(p)?u[l]=$t(p):P.plainObject(p)?(u[l]=F(u[l]||{},Ie(p)),P.object(o.perAction[l])&&"enabled"in o.perAction[l]&&(u[l].enabled=p.enabled!==!1)):P.bool(p)&&P.object(o.perAction[l])?u[l].enabled=p:u[l]=p}}},{key:"getRect",value:function(n){return n=n||(P.element(this.target)?this.target:null),P.string(this.target)&&(n=n||this._context.querySelector(this.target)),ot(n)}},{key:"rectChecker",value:function(n){var r=this;return P.func(n)?(this.getRect=function(o){var a=F({},n.apply(r,o));return"width"in a||(a.width=a.right-a.left,a.height=a.bottom-a.top),a},this):n===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(n,r){if(Lt(r)||P.object(r)){for(var o in this.options[n]=r,this._actions.map)this.options[o][n]=r;return this}return this.options[n]}},{key:"origin",value:function(n){return this._backCompatOption("origin",n)}},{key:"deltaSource",value:function(n){return n==="page"||n==="client"?(this.options.deltaSource=n,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var n=this.target;return P.string(n)?Array.from(this._context.querySelectorAll(n)):P.func(n)&&n.getAllElements?n.getAllElements():P.element(n)?[n]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(n){return this._context===n.ownerDocument||Z(this._context,n)}},{key:"testIgnoreAllow",value:function(n,r,o){return!this.testIgnore(n.ignoreFrom,r,o)&&this.testAllow(n.allowFrom,r,o)}},{key:"testAllow",value:function(n,r,o){return!n||!!P.element(o)&&(P.string(n)?he(o,n,r):!!P.element(n)&&Z(n,o))}},{key:"testIgnore",value:function(n,r,o){return!(!n||!P.element(o))&&(P.string(n)?he(o,n,r):!!P.element(n)&&Z(n,o))}},{key:"fire",value:function(n){return this.events.fire(n),this}},{key:"_onOff",value:function(n,r,o,a,l){P.object(r)&&!P.array(r)&&(a=o,o=null);var u=Ee(r,o,l);for(var p in u){p==="wheel"&&(p=G.wheelEvent);for(var h=0,y=u[p];h<y.length;h++){var m=y[h];Je(p,this._actions)?this.events[n===we.On?"on":"off"](p,m):P.string(this.target)?this._scopeEvents[n===we.On?"addDelegate":"removeDelegate"](this.target,this._context,p,m,a):this._scopeEvents[n===we.On?"add":"remove"](this.target,p,m,a)}}return this}},{key:"on",value:function(n,r,o){return this._onOff(we.On,n,r,o)}},{key:"off",value:function(n,r,o){return this._onOff(we.Off,n,r,o)}},{key:"set",value:function(n){var r=this._defaults;for(var o in P.object(n)||(n={}),this.options=Ie(r.base),this._actions.methodDict){var a=o,l=this._actions.methodDict[a];this.options[a]={},this.setPerAction(a,F(F({},r.perAction),r.actions[a])),this[l](n[a])}for(var u in n)u!=="getRect"?P.func(this[u])&&this[u](n[u]):this.rectChecker(n.getRect);return this}},{key:"unset",value:function(){if(P.string(this.target))for(var n in this._scopeEvents.delegatedEvents)for(var r=this._scopeEvents.delegatedEvents[n],o=r.length-1;o>=0;o--){var a=r[o],l=a.selector,u=a.context,p=a.listeners;l===this.target&&u===this._context&&r.splice(o,1);for(var h=p.length-1;h>=0;h--)this._scopeEvents.removeDelegate(this.target,this._context,n,p[h][0],p[h][1])}else this._scopeEvents.remove(this.target,"all")}}]),i}(),ai=function(){function i(n){var r=this;g(this,i),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=n,n.addListeners({"interactable:unset":function(o){var a=o.interactable,l=a.target,u=P.string(l)?r.selectorMap[l]:l[r.scope.id],p=_e(u,function(h){return h===a});u.splice(p,1)}})}return b(i,[{key:"new",value:function(n,r){r=F(r||{},{actions:this.scope.actions});var o=new this.scope.Interactable(n,r,this.scope.document,this.scope.events);return this.scope.addDocument(o._doc),this.list.push(o),P.string(n)?(this.selectorMap[n]||(this.selectorMap[n]=[]),this.selectorMap[n].push(o)):(o.target[this.scope.id]||Object.defineProperty(n,this.scope.id,{value:[],configurable:!0}),n[this.scope.id].push(o)),this.scope.fire("interactable:new",{target:n,options:r,interactable:o,win:this.scope._win}),o}},{key:"getExisting",value:function(n,r){var o=r&&r.context||this.scope.document,a=P.string(n),l=a?this.selectorMap[n]:n[this.scope.id];if(l)return Ae(l,function(u){return u._context===o&&(a||u.inContext(n))})}},{key:"forEachMatch",value:function(n,r){for(var o=0,a=this.list;o<a.length;o++){var l=a[o],u=void 0;if((P.string(l.target)?P.element(n)&&ue(n,l.target):n===l.target)&&l.inContext(n)&&(u=r(l)),u!==void 0)return u}}}]),i}(),si=function(){function i(){var n=this;g(this,i),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=G,this.defaults=Ie(rn),this.Eventable=pn,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(o){var a=function l(u,p){var h=o.interactables.getExisting(u,p);return h||((h=o.interactables.new(u,p)).events.global=l.globalEvents),h};return a.getPointerAverage=At,a.getTouchBBox=lt,a.getTouchDistance=ct,a.getTouchAngle=ut,a.getElementRect=ot,a.getElementClientRect=Te,a.matchesSelector=ue,a.closest=ye,a.globalEvents={},a.version="1.10.27",a.scope=o,a.use=function(l,u){return this.scope.usePlugin(l,u),this},a.isSet=function(l,u){return!!this.scope.interactables.get(l,u&&u.context)},a.on=Fe(function(l,u,p){if(P.string(l)&&l.search(" ")!==-1&&(l=l.trim().split(/ +/)),P.array(l)){for(var h=0,y=l;h<y.length;h++){var m=y[h];this.on(m,u,p)}return this}if(P.object(l)){for(var w in l)this.on(w,l[w],u);return this}return Je(l,this.scope.actions)?this.globalEvents[l]?this.globalEvents[l].push(u):this.globalEvents[l]=[u]:this.scope.events.add(this.scope.document,l,u,{options:p}),this},"The interact.on() method is being deprecated"),a.off=Fe(function(l,u,p){if(P.string(l)&&l.search(" ")!==-1&&(l=l.trim().split(/ +/)),P.array(l)){for(var h=0,y=l;h<y.length;h++){var m=y[h];this.off(m,u,p)}return this}if(P.object(l)){for(var w in l)this.off(w,l[w],u);return this}var E;return Je(l,this.scope.actions)?l in this.globalEvents&&(E=this.globalEvents[l].indexOf(u))!==-1&&this.globalEvents[l].splice(E,1):this.scope.events.remove(this.scope.document,l,u,p),this},"The interact.off() method is being deprecated"),a.debug=function(){return this.scope},a.supportsTouch=function(){return G.supportsTouch},a.supportsPointerEvent=function(){return G.supportsPointerEvent},a.stop=function(){for(var l=0,u=this.scope.interactions.list;l<u.length;l++)u[l].stop();return this},a.pointerMoveTolerance=function(l){return P.number(l)?(this.scope.interactions.pointerMoveTolerance=l,this):this.scope.interactions.pointerMoveTolerance},a.addDocument=function(l,u){this.scope.addDocument(l,u)},a.removeDocument=function(l){this.scope.removeDocument(l)},a}(this),this.InteractEvent=wt,this.Interactable=void 0,this.interactables=new ai(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(o){return n.removeDocument(o.target)};var r=this;this.Interactable=function(o){C(l,o);var a=D(l);function l(){return g(this,l),a.apply(this,arguments)}return b(l,[{key:"_defaults",get:function(){return r.defaults}},{key:"set",value:function(u){return M(O(l.prototype),"set",this).call(this,u),r.fire("interactable:set",{options:u,interactable:this}),this}},{key:"unset",value:function(){M(O(l.prototype),"unset",this).call(this);var u=r.interactables.list.indexOf(this);u<0||(r.interactables.list.splice(u,1),r.fire("interactable:unset",{interactable:this}))}}]),l}(oi)}return b(i,[{key:"addListeners",value:function(n,r){this.listenerMaps.push({id:r,map:n})}},{key:"fire",value:function(n,r){for(var o=0,a=this.listenerMaps;o<a.length;o++){var l=a[o].map[n];if(l&&l(r,this,n)===!1)return!1}}},{key:"init",value:function(n){return this.isInitialized?this:function(r,o){return r.isInitialized=!0,P.window(o)&&ce(o),U.init(o),G.init(o),xe.init(o),r.window=o,r.document=o.document,r.usePlugin(ri),r.usePlugin(ti),r}(this,n)}},{key:"pluginIsInstalled",value:function(n){var r=n.id;return r?!!this._plugins.map[r]:this._plugins.list.indexOf(n)!==-1}},{key:"usePlugin",value:function(n,r){if(!this.isInitialized)return this;if(this.pluginIsInstalled(n))return this;if(n.id&&(this._plugins.map[n.id]=n),this._plugins.list.push(n),n.install&&n.install(this,r),n.listeners&&n.before){for(var o=0,a=this.listenerMaps.length,l=n.before.reduce(function(p,h){return p[h]=!0,p[mn(h)]=!0,p},{});o<a;o++){var u=this.listenerMaps[o].id;if(u&&(l[u]||l[mn(u)]))break}this.listenerMaps.splice(o,0,{id:n.id,map:n.listeners})}else n.listeners&&this.listenerMaps.push({id:n.id,map:n.listeners});return this}},{key:"addDocument",value:function(n,r){if(this.getDocIndex(n)!==-1)return!1;var o=Y(n);r=r?F({},r):{},this.documents.push({doc:n,options:r}),this.events.documents.push(n),n!==this.document&&this.events.add(o,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:n,window:o,scope:this,options:r})}},{key:"removeDocument",value:function(n){var r=this.getDocIndex(n),o=Y(n),a=this.documents[r].options;this.events.remove(o,"unload",this.onWindowUnload),this.documents.splice(r,1),this.events.documents.splice(r,1),this.fire("scope:remove-document",{doc:n,window:o,scope:this,options:a})}},{key:"getDocIndex",value:function(n){for(var r=0;r<this.documents.length;r++)if(this.documents[r].doc===n)return r;return-1}},{key:"getDocOptions",value:function(n){var r=this.getDocIndex(n);return r===-1?null:this.documents[r].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),i}();function mn(i){return i&&i.replace(/\/.*$/,"")}var vn=new si,ie=vn.interactStatic,li=typeof globalThis<"u"?globalThis:window;vn.init(li);var ci=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(i){var n=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(o){var a=o[0],l=o[1];return a in i||l in i}),r=function(o,a){for(var l=i.range,u=i.limits,p=u===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:u,h=i.offset,y=h===void 0?{x:0,y:0}:h,m={range:l,grid:i,x:null,y:null},w=0;w<n.length;w++){var E=n[w],I=E[0],k=E[1],L=Math.round((o-y.x)/i[I]),R=Math.round((a-y.y)/i[k]);m[I]=Math.max(p.left,Math.min(p.right,L*i[I]+y.x)),m[k]=Math.max(p.top,Math.min(p.bottom,R*i[k]+y.y))}return m};return r.grid=i,r.coordFields=n,r}}),ui={id:"snappers",install:function(i){var n=i.interactStatic;n.snappers=F(n.snappers||{},ci),n.createSnapGrid=n.snappers.grid}},di=ui,pi={start:function(i){var n=i.state,r=i.rect,o=i.edges,a=i.pageCoords,l=n.options,u=l.ratio,p=l.enabled,h=n.options,y=h.equalDelta,m=h.modifiers;u==="preserve"&&(u=r.width/r.height),n.startCoords=F({},a),n.startRect=F({},r),n.ratio=u,n.equalDelta=y;var w=n.linkedEdges={top:o.top||o.left&&!o.bottom,left:o.left||o.top&&!o.right,bottom:o.bottom||o.right&&!o.top,right:o.right||o.bottom&&!o.left};if(n.xIsPrimaryAxis=!(!o.left&&!o.right),n.equalDelta){var E=(w.left?1:-1)*(w.top?1:-1);n.edgeSign={x:E,y:E}}else n.edgeSign={x:w.left?-1:1,y:w.top?-1:1};if(p!==!1&&F(o,w),m!=null&&m.length){var I=new bt(i.interaction);I.copyFrom(i.interaction.modification),I.prepareStates(m),n.subModification=I,I.startAll(f({},i))}},set:function(i){var n=i.state,r=i.rect,o=i.coords,a=n.linkedEdges,l=F({},o),u=n.equalDelta?fi:hi;if(F(i.edges,a),u(n,n.xIsPrimaryAxis,o,r),!n.subModification)return null;var p=F({},r);Ue(a,p,{x:o.x-l.x,y:o.y-l.y});var h=n.subModification.setAll(f(f({},i),{},{rect:p,edges:a,pageCoords:o,prevCoords:o,prevRect:p})),y=h.delta;return h.changed&&(u(n,Math.abs(y.x)>Math.abs(y.y),h.coords,h.rect),F(o,h.coords)),h.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function fi(i,n,r){var o=i.startCoords,a=i.edgeSign;n?r.y=o.y+(r.x-o.x)*a.y:r.x=o.x+(r.y-o.y)*a.x}function hi(i,n,r,o){var a=i.startRect,l=i.startCoords,u=i.ratio,p=i.edgeSign;if(n){var h=o.width/u;r.y=l.y+(h-a.height)*p.y}else{var y=o.height*u;r.x=l.x+(y-a.width)*p.x}}var gi=be(pi,"aspectRatio"),yn=function(){};yn._defaults={};var tt=yn;function Pe(i,n,r){return P.func(i)?Me(i,n.interactable,n.element,[r.x,r.y,n]):Me(i,n.interactable,n.element)}var nt={start:function(i){var n=i.rect,r=i.startOffset,o=i.state,a=i.interaction,l=i.pageCoords,u=o.options,p=u.elementRect,h=F({left:0,top:0,right:0,bottom:0},u.offset||{});if(n&&p){var y=Pe(u.restriction,a,l);if(y){var m=y.right-y.left-n.width,w=y.bottom-y.top-n.height;m<0&&(h.left+=m,h.right+=m),w<0&&(h.top+=w,h.bottom+=w)}h.left+=r.left-n.width*p.left,h.top+=r.top-n.height*p.top,h.right+=r.right-n.width*(1-p.right),h.bottom+=r.bottom-n.height*(1-p.bottom)}o.offset=h},set:function(i){var n=i.coords,r=i.interaction,o=i.state,a=o.options,l=o.offset,u=Pe(a.restriction,r,n);if(u){var p=function(h){return!h||"left"in h&&"top"in h||((h=F({},h)).left=h.x||0,h.top=h.y||0,h.right=h.right||h.left+h.width,h.bottom=h.bottom||h.top+h.height),h}(u);n.x=Math.max(Math.min(p.right-l.right,n.x),p.left+l.left),n.y=Math.max(Math.min(p.bottom-l.bottom,n.y),p.top+l.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},mi=be(nt,"restrict"),xn={top:1/0,left:1/0,bottom:-1/0,right:-1/0},bn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function wn(i,n){for(var r=0,o=["top","left","bottom","right"];r<o.length;r++){var a=o[r];a in i||(i[a]=n[a])}return i}var $e={noInner:xn,noOuter:bn,start:function(i){var n,r=i.interaction,o=i.startOffset,a=i.state,l=a.options;l&&(n=He(Pe(l.offset,r,r.coords.start.page))),n=n||{x:0,y:0},a.offset={top:n.y+o.top,left:n.x+o.left,bottom:n.y-o.bottom,right:n.x-o.right}},set:function(i){var n=i.coords,r=i.edges,o=i.interaction,a=i.state,l=a.offset,u=a.options;if(r){var p=F({},n),h=Pe(u.inner,o,p)||{},y=Pe(u.outer,o,p)||{};wn(h,xn),wn(y,bn),r.top?n.y=Math.min(Math.max(y.top+l.top,p.y),h.top+l.top):r.bottom&&(n.y=Math.max(Math.min(y.bottom+l.bottom,p.y),h.bottom+l.bottom)),r.left?n.x=Math.min(Math.max(y.left+l.left,p.x),h.left+l.left):r.right&&(n.x=Math.max(Math.min(y.right+l.right,p.x),h.right+l.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},vi=be($e,"restrictEdges"),yi=F({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(i){}},nt.defaults),xi=be({start:nt.start,set:nt.set,defaults:yi},"restrictRect"),bi={width:-1/0,height:-1/0},wi={width:1/0,height:1/0},Si=be({start:function(i){return $e.start(i)},set:function(i){var n=i.interaction,r=i.state,o=i.rect,a=i.edges,l=r.options;if(a){var u=at(Pe(l.min,n,i.coords))||bi,p=at(Pe(l.max,n,i.coords))||wi;r.options={endOnly:l.endOnly,inner:F({},$e.noInner),outer:F({},$e.noOuter)},a.top?(r.options.inner.top=o.bottom-u.height,r.options.outer.top=o.bottom-p.height):a.bottom&&(r.options.inner.bottom=o.top+u.height,r.options.outer.bottom=o.top+p.height),a.left?(r.options.inner.left=o.right-u.width,r.options.outer.left=o.right-p.width):a.right&&(r.options.inner.right=o.left+u.width,r.options.outer.right=o.left+p.width),$e.set(i),r.options=l}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Pt={start:function(i){var n,r=i.interaction,o=i.interactable,a=i.element,l=i.rect,u=i.state,p=i.startOffset,h=u.options,y=h.offsetWithOrigin?function(E){var I=E.interaction.element,k=He(Me(E.state.options.origin,null,null,[I])),L=k||De(E.interactable,I,E.interaction.prepared.name);return L}(i):{x:0,y:0};if(h.offset==="startCoords")n={x:r.coords.start.page.x,y:r.coords.start.page.y};else{var m=Me(h.offset,o,a,[r]);(n=He(m)||{x:0,y:0}).x+=y.x,n.y+=y.y}var w=h.relativePoints;u.offsets=l&&w&&w.length?w.map(function(E,I){return{index:I,relativePoint:E,x:p.left-l.width*E.x+n.x,y:p.top-l.height*E.y+n.y}}):[{index:0,relativePoint:null,x:n.x,y:n.y}]},set:function(i){var n=i.interaction,r=i.coords,o=i.state,a=o.options,l=o.offsets,u=De(n.interactable,n.element,n.prepared.name),p=F({},r),h=[];a.offsetWithOrigin||(p.x-=u.x,p.y-=u.y);for(var y=0,m=l;y<m.length;y++)for(var w=m[y],E=p.x-w.x,I=p.y-w.y,k=0,L=a.targets.length;k<L;k++){var R=a.targets[k],j=void 0;(j=P.func(R)?R(E,I,n._proxy,w,k):R)&&h.push({x:(P.number(j.x)?j.x:E)+w.x,y:(P.number(j.y)?j.y:I)+w.y,range:P.number(j.range)?j.range:a.range,source:R,index:k,offset:w})}for(var A={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},$=0;$<h.length;$++){var W=h[$],N=W.range,V=W.x-p.x,re=W.y-p.y,X=je(V,re),le=X<=N;N===1/0&&A.inRange&&A.range!==1/0&&(le=!1),A.target&&!(le?A.inRange&&N!==1/0?X/N<A.distance/A.range:N===1/0&&A.range!==1/0||X<A.distance:!A.inRange&&X<A.distance)||(A.target=W,A.distance=X,A.range=N,A.inRange=le,A.delta.x=V,A.delta.y=re)}return A.inRange&&(r.x=A.target.x,r.y=A.target.y),o.closest=A,A},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Ci=be(Pt,"snap"),it={start:function(i){var n=i.state,r=i.edges,o=n.options;if(!r)return null;i.state={options:{targets:null,relativePoints:[{x:r.left?0:1,y:r.top?0:1}],offset:o.offset||"self",origin:{x:0,y:0},range:o.range}},n.targetFields=n.targetFields||[["width","height"],["x","y"]],Pt.start(i),n.offsets=i.state.offsets,i.state=n},set:function(i){var n=i.interaction,r=i.state,o=i.coords,a=r.options,l=r.offsets,u={x:o.x-l[0].x,y:o.y-l[0].y};r.options=F({},a),r.options.targets=[];for(var p=0,h=a.targets||[];p<h.length;p++){var y=h[p],m=void 0;if(m=P.func(y)?y(u.x,u.y,n):y){for(var w=0,E=r.targetFields;w<E.length;w++){var I=E[w],k=I[0],L=I[1];if(k in m||L in m){m.x=m[k],m.y=m[L];break}}r.options.targets.push(m)}}var R=Pt.set(i);return r.options=a,R},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Ei=be(it,"snapSize"),Tt={aspectRatio:gi,restrictEdges:vi,restrict:mi,restrictRect:xi,restrictSize:Si,snapEdges:be({start:function(i){var n=i.edges;return n?(i.state.targetFields=i.state.targetFields||[[n.left?"left":"right",n.top?"top":"bottom"]],it.start(i)):null},set:it.set,defaults:F(Ie(it.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Ci,snapSize:Ei,spring:tt,avoid:tt,transform:tt,rubberband:tt},Oi={id:"modifiers",install:function(i){var n=i.interactStatic;for(var r in i.usePlugin(nn),i.usePlugin(di),n.modifiers=Tt,Tt){var o=Tt[r],a=o._defaults,l=o._methods;a._methods=l,i.defaults.perAction[r]=a}}},Pi=Oi,Sn=function(i){C(r,i);var n=D(r);function r(o,a,l,u,p,h){var y;if(g(this,r),Ke(_(y=n.call(this,p)),l),l!==a&&Ke(_(y),a),y.timeStamp=h,y.originalEvent=l,y.type=o,y.pointerId=Re(a),y.pointerType=Ft(a),y.target=u,y.currentTarget=null,o==="tap"){var m=p.getPointerIndex(a);y.dt=y.timeStamp-p.pointers[m].downTime;var w=y.timeStamp-p.tapTime;y.double=!!p.prevTap&&p.prevTap.type!=="doubletap"&&p.prevTap.target===y.target&&w<500}else o==="doubletap"&&(y.dt=a.timeStamp-p.tapTime,y.double=!0);return y}return b(r,[{key:"_subtractOrigin",value:function(o){var a=o.x,l=o.y;return this.pageX-=a,this.pageY-=l,this.clientX-=a,this.clientY-=l,this}},{key:"_addOrigin",value:function(o){var a=o.x,l=o.y;return this.pageX+=a,this.pageY+=l,this.clientX+=a,this.clientY+=l,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),r}(Ge),Be={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(i){i.pointerEvents=Be,i.defaults.actions.pointerEvents=Be.defaults,F(i.actions.phaselessTypes,Be.types)},listeners:{"interactions:new":function(i){var n=i.interaction;n.prevTap=null,n.tapTime=0},"interactions:update-pointer":function(i){var n=i.down,r=i.pointerInfo;!n&&r.hold||(r.hold={duration:1/0,timeout:null})},"interactions:move":function(i,n){var r=i.interaction,o=i.pointer,a=i.event,l=i.eventTarget;i.duplicate||r.pointerIsDown&&!r.pointerWasMoved||(r.pointerIsDown&&kt(i),Se({interaction:r,pointer:o,event:a,eventTarget:l,type:"move"},n))},"interactions:down":function(i,n){(function(r,o){for(var a=r.interaction,l=r.pointer,u=r.event,p=r.eventTarget,h=r.pointerIndex,y=a.pointers[h].hold,m=It(p),w={interaction:a,pointer:l,event:u,eventTarget:p,type:"hold",targets:[],path:m,node:null},E=0;E<m.length;E++){var I=m[E];w.node=I,o.fire("pointerEvents:collect-targets",w)}if(w.targets.length){for(var k=1/0,L=0,R=w.targets;L<R.length;L++){var j=R[L].eventable.options.holdDuration;j<k&&(k=j)}y.duration=k,y.timeout=setTimeout(function(){Se({interaction:a,eventTarget:p,pointer:l,event:u,type:"hold"},o)},k)}})(i,n),Se(i,n)},"interactions:up":function(i,n){kt(i),Se(i,n),function(r,o){var a=r.interaction,l=r.pointer,u=r.event,p=r.eventTarget;a.pointerWasMoved||Se({interaction:a,eventTarget:p,pointer:l,event:u,type:"tap"},o)}(i,n)},"interactions:cancel":function(i,n){kt(i),Se(i,n)}},PointerEvent:Sn,fire:Se,collectEventTargets:Cn,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Se(i,n){var r=i.interaction,o=i.pointer,a=i.event,l=i.eventTarget,u=i.type,p=i.targets,h=p===void 0?Cn(i,n):p,y=new Sn(u,o,a,l,r,n.now());n.fire("pointerEvents:new",{pointerEvent:y});for(var m={interaction:r,pointer:o,event:a,eventTarget:l,targets:h,type:u,pointerEvent:y},w=0;w<h.length;w++){var E=h[w];for(var I in E.props||{})y[I]=E.props[I];var k=De(E.eventable,E.node);if(y._subtractOrigin(k),y.eventable=E.eventable,y.currentTarget=E.node,E.eventable.fire(y),y._addOrigin(k),y.immediatePropagationStopped||y.propagationStopped&&w+1<h.length&&h[w+1].node!==y.currentTarget)break}if(n.fire("pointerEvents:fired",m),u==="tap"){var L=y.double?Se({interaction:r,pointer:o,event:a,eventTarget:l,type:"doubletap"},n):y;r.prevTap=L,r.tapTime=L.timeStamp}return y}function Cn(i,n){var r=i.interaction,o=i.pointer,a=i.event,l=i.eventTarget,u=i.type,p=r.getPointerIndex(o),h=r.pointers[p];if(u==="tap"&&(r.pointerWasMoved||!h||h.downTarget!==l))return[];for(var y=It(l),m={interaction:r,pointer:o,event:a,eventTarget:l,type:u,path:y,targets:[],node:null},w=0;w<y.length;w++){var E=y[w];m.node=E,n.fire("pointerEvents:collect-targets",m)}return u==="hold"&&(m.targets=m.targets.filter(function(I){var k,L;return I.eventable.options.holdDuration===((k=r.pointers[p])==null||(L=k.hold)==null?void 0:L.duration)})),m.targets}function kt(i){var n=i.interaction,r=i.pointerIndex,o=n.pointers[r].hold;o&&o.timeout&&(clearTimeout(o.timeout),o.timeout=null)}var Ti=Object.freeze({__proto__:null,default:Be});function ki(i){var n=i.interaction;n.holdIntervalHandle&&(clearInterval(n.holdIntervalHandle),n.holdIntervalHandle=null)}var Ii={id:"pointer-events/holdRepeat",install:function(i){i.usePlugin(Be);var n=i.pointerEvents;n.defaults.holdRepeatInterval=0,n.types.holdrepeat=i.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(i,n){return i["pointerEvents:".concat(n)]=ki,i},{"pointerEvents:new":function(i){var n=i.pointerEvent;n.type==="hold"&&(n.count=(n.count||0)+1)},"pointerEvents:fired":function(i,n){var r=i.interaction,o=i.pointerEvent,a=i.eventTarget,l=i.targets;if(o.type==="hold"&&l.length){var u=l[0].eventable.options.holdRepeatInterval;u<=0||(r.holdIntervalHandle=setTimeout(function(){n.pointerEvents.fire({interaction:r,eventTarget:a,type:"hold",pointer:o,event:o},n)},u))}}})},Li=Ii,Mi={id:"pointer-events/interactableTargets",install:function(i){var n=i.Interactable;n.prototype.pointerEvents=function(o){return F(this.events.options,o),this};var r=n.prototype._backCompatOption;n.prototype._backCompatOption=function(o,a){var l=r.call(this,o,a);return l===this&&(this.events.options[o]=a),l}},listeners:{"pointerEvents:collect-targets":function(i,n){var r=i.targets,o=i.node,a=i.type,l=i.eventTarget;n.interactables.forEachMatch(o,function(u){var p=u.events,h=p.options;p.types[a]&&p.types[a].length&&u.testIgnoreAllow(h,o,l)&&r.push({node:o,eventable:p,props:{interactable:u}})})},"interactable:new":function(i){var n=i.interactable;n.events.getRect=function(r){return n.getRect(r)}},"interactable:set":function(i,n){var r=i.interactable,o=i.options;F(r.events.options,n.pointerEvents.defaults),F(r.events.options,o.pointerEvents||{})}}},Di=Mi,ji={id:"pointer-events",install:function(i){i.usePlugin(Ti),i.usePlugin(Li),i.usePlugin(Di)}},Ri=ji,_i={id:"reflow",install:function(i){var n=i.Interactable;i.actions.phases.reflow=!0,n.prototype.reflow=function(r){return function(o,a,l){for(var u=o.getAllElements(),p=l.window.Promise,h=p?[]:null,y=function(){var w=u[m],E=o.getRect(w);if(!E)return 1;var I,k=Ae(l.interactions.list,function(j){return j.interacting()&&j.interactable===o&&j.element===w&&j.prepared.name===a.name});if(k)k.move(),h&&(I=k._reflowPromise||new p(function(j){k._reflowResolve=j}));else{var L=at(E),R=function(j){return{coords:j,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:L.x,y:L.y},client:{x:L.x,y:L.y},timeStamp:l.now()});I=function(j,A,$,W,N){var V=j.interactions.new({pointerType:"reflow"}),re={interaction:V,event:N,pointer:N,eventTarget:$,phase:"reflow"};V.interactable=A,V.element=$,V.prevEvent=N,V.updatePointer(N,N,$,!0),jt(V.coords.delta),mt(V.prepared,W),V._doPhase(re);var X=j.window,le=X.Promise,de=le?new le(function(ve){V._reflowResolve=ve}):void 0;return V._reflowPromise=de,V.start(W,A,$),V._interacting?(V.move(re),V.end(N)):(V.stop(),V._reflowResolve()),V.removePointer(N,N),de}(l,o,w,a,R)}h&&h.push(I)},m=0;m<u.length&&!y();m++);return h&&p.all(h).then(function(){return o})}(this,r,i)}},listeners:{"interactions:stop":function(i,n){var r=i.interaction;r.pointerType==="reflow"&&(r._reflowResolve&&r._reflowResolve(),function(o,a){o.splice(o.indexOf(a),1)}(n.interactions.list,r))}}},Ai=_i;if(ie.use(tn),ie.use(ln),ie.use(Ri),ie.use(Zn),ie.use(Pi),ie.use(Bn),ie.use(Ln),ie.use(Dn),ie.use(Ai),ie.default=ie,d(v)==="object"&&v)try{v.exports=ie}catch{}return ie.default=ie,ie})})(interact_min,interact_min.exports);var interact_minExports=interact_min.exports;const interact=getDefaultExportFromCjs(interact_minExports),isString=v=>typeof v=="string",defer=()=>{let v,s;const c=new Promise((f,d)=>{v=f,s=d});return c.resolve=v,c.reject=s,c},makeString=v=>v==null?"":""+v,copy=(v,s,c)=>{v.forEach(f=>{s[f]&&(c[f]=s[f])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=v=>v&&v.indexOf("###")>-1?v.replace(lastOfPathSeparatorRegExp,"."):v,canNotTraverseDeeper=v=>!v||isString(v),getLastOfPath=(v,s,c)=>{const f=isString(s)?s.split("."):s;let d=0;for(;d<f.length-1;){if(canNotTraverseDeeper(v))return{};const g=cleanKey(f[d]);!v[g]&&c&&(v[g]=new c),Object.prototype.hasOwnProperty.call(v,g)?v=v[g]:v={},++d}return canNotTraverseDeeper(v)?{}:{obj:v,k:cleanKey(f[d])}},setPath=(v,s,c)=>{const{obj:f,k:d}=getLastOfPath(v,s,Object);if(f!==void 0||s.length===1){f[d]=c;return}let g=s[s.length-1],x=s.slice(0,s.length-1),b=getLastOfPath(v,x,Object);for(;b.obj===void 0&&x.length;)g=`${x[x.length-1]}.${g}`,x=x.slice(0,x.length-1),b=getLastOfPath(v,x,Object),b!=null&&b.obj&&typeof b.obj[`${b.k}.${g}`]<"u"&&(b.obj=void 0);b.obj[`${b.k}.${g}`]=c},pushPath=(v,s,c,f)=>{const{obj:d,k:g}=getLastOfPath(v,s,Object);d[g]=d[g]||[],d[g].push(c)},getPath=(v,s)=>{const{obj:c,k:f}=getLastOfPath(v,s);if(c&&Object.prototype.hasOwnProperty.call(c,f))return c[f]},getPathWithDefaults=(v,s,c)=>{const f=getPath(v,c);return f!==void 0?f:getPath(s,c)},deepExtend=(v,s,c)=>{for(const f in s)f!=="__proto__"&&f!=="constructor"&&(f in v?isString(v[f])||v[f]instanceof String||isString(s[f])||s[f]instanceof String?c&&(v[f]=s[f]):deepExtend(v[f],s[f],c):v[f]=s[f]);return v},regexEscape=v=>v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=v=>isString(v)?v.replace(/[&<>"'\/]/g,s=>_entityMap[s]):v;class RegExpCache{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const c=this.regExpMap.get(s);if(c!==void 0)return c;const f=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,f),this.regExpQueue.push(s),f}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(v,s,c)=>{s=s||"",c=c||"";const f=chars.filter(x=>s.indexOf(x)<0&&c.indexOf(x)<0);if(f.length===0)return!0;const d=looksLikeObjectPathRegExpCache.getRegExp(`(${f.map(x=>x==="?"?"\\?":x).join("|")})`);let g=!d.test(v);if(!g){const x=v.indexOf(c);x>0&&!d.test(v.substring(0,x))&&(g=!0)}return g},deepFind=(v,s,c=".")=>{if(!v)return;if(v[s])return Object.prototype.hasOwnProperty.call(v,s)?v[s]:void 0;const f=s.split(c);let d=v;for(let g=0;g<f.length;){if(!d||typeof d!="object")return;let x,b="";for(let S=g;S<f.length;++S)if(S!==g&&(b+=c),b+=f[S],x=d[b],x!==void 0){if(["string","number","boolean"].indexOf(typeof x)>-1&&S<f.length-1)continue;g+=S-g+1;break}d=x}return d},getCleanedCode=v=>v==null?void 0:v.replace("_","-"),consoleLogger={type:"logger",log(v){this.output("log",v)},warn(v){this.output("warn",v)},error(v){this.output("error",v)},output(v,s){var c,f;(f=(c=console==null?void 0:console[v])==null?void 0:c.apply)==null||f.call(c,console,s)}};class Logger{constructor(s,c={}){this.init(s,c)}init(s,c={}){this.prefix=c.prefix||"i18next:",this.logger=s||consoleLogger,this.options=c,this.debug=c.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,c,f,d){return d&&!this.debug?null:(isString(s[0])&&(s[0]=`${f}${this.prefix} ${s[0]}`),this.logger[c](s))}create(s){return new Logger(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new Logger(this.logger,s)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(s,c){return s.split(" ").forEach(f=>{this.observers[f]||(this.observers[f]=new Map);const d=this.observers[f].get(c)||0;this.observers[f].set(c,d+1)}),this}off(s,c){if(this.observers[s]){if(!c){delete this.observers[s];return}this.observers[s].delete(c)}}emit(s,...c){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([d,g])=>{for(let x=0;x<g;x++)d(...c)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([d,g])=>{for(let x=0;x<g;x++)d.apply(d,[s,...c])})}}class ResourceStore extends EventEmitter{constructor(s,c={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=c,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const c=this.options.ns.indexOf(s);c>-1&&this.options.ns.splice(c,1)}getResource(s,c,f,d={}){var C,O;const g=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,x=d.ignoreJSONStructure!==void 0?d.ignoreJSONStructure:this.options.ignoreJSONStructure;let b;s.indexOf(".")>-1?b=s.split("."):(b=[s,c],f&&(Array.isArray(f)?b.push(...f):isString(f)&&g?b.push(...f.split(g)):b.push(f)));const S=getPath(this.data,b);return!S&&!c&&!f&&s.indexOf(".")>-1&&(s=b[0],c=b[1],f=b.slice(2).join(".")),S||!x||!isString(f)?S:deepFind((O=(C=this.data)==null?void 0:C[s])==null?void 0:O[c],f,g)}addResource(s,c,f,d,g={silent:!1}){const x=g.keySeparator!==void 0?g.keySeparator:this.options.keySeparator;let b=[s,c];f&&(b=b.concat(x?f.split(x):f)),s.indexOf(".")>-1&&(b=s.split("."),d=c,c=b[1]),this.addNamespaces(c),setPath(this.data,b,d),g.silent||this.emit("added",s,c,f,d)}addResources(s,c,f,d={silent:!1}){for(const g in f)(isString(f[g])||Array.isArray(f[g]))&&this.addResource(s,c,g,f[g],{silent:!0});d.silent||this.emit("added",s,c,f)}addResourceBundle(s,c,f,d,g,x={silent:!1,skipCopy:!1}){let b=[s,c];s.indexOf(".")>-1&&(b=s.split("."),d=f,f=c,c=b[1]),this.addNamespaces(c);let S=getPath(this.data,b)||{};x.skipCopy||(f=JSON.parse(JSON.stringify(f))),d?deepExtend(S,f,g):S={...S,...f},setPath(this.data,b,S),x.silent||this.emit("added",s,c,f)}removeResourceBundle(s,c){this.hasResourceBundle(s,c)&&delete this.data[s][c],this.removeNamespaces(c),this.emit("removed",s,c)}hasResourceBundle(s,c){return this.getResource(s,c)!==void 0}getResourceBundle(s,c){return c||(c=this.options.defaultNS),this.getResource(s,c)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const c=this.getDataByLanguage(s);return!!(c&&Object.keys(c)||[]).find(d=>c[d]&&Object.keys(c[d]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(v){this.processors[v.name]=v},handle(v,s,c,f,d){return v.forEach(g=>{var x;s=((x=this.processors[g])==null?void 0:x.process(s,c,f,d))??s}),s}};const checkedLoadedFor={},shouldHandleAsObject=v=>!isString(v)&&typeof v!="boolean"&&typeof v!="number";class Translator extends EventEmitter{constructor(s,c={}){super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=c,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,c={interpolation:{}}){const f={...c};if(s==null)return!1;const d=this.resolve(s,f);return(d==null?void 0:d.res)!==void 0}extractFromKey(s,c){let f=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let g=c.ns||this.options.defaultNS||[];const x=f&&s.indexOf(f)>-1,b=!this.options.userDefinedKeySeparator&&!c.keySeparator&&!this.options.userDefinedNsSeparator&&!c.nsSeparator&&!looksLikeObjectPath(s,f,d);if(x&&!b){const S=s.match(this.interpolator.nestingRegexp);if(S&&S.length>0)return{key:s,namespaces:isString(g)?[g]:g};const C=s.split(f);(f!==d||f===d&&this.options.ns.indexOf(C[0])>-1)&&(g=C.shift()),s=C.join(d)}return{key:s,namespaces:isString(g)?[g]:g}}translate(s,c,f){let d=typeof c=="object"?{...c}:c;if(typeof d!="object"&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(d={...d}),d||(d={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);const g=d.returnDetails!==void 0?d.returnDetails:this.options.returnDetails,x=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,{key:b,namespaces:S}=this.extractFromKey(s[s.length-1],d),C=S[S.length-1];let O=d.nsSeparator!==void 0?d.nsSeparator:this.options.nsSeparator;O===void 0&&(O=":");const T=d.lng||this.language,_=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((T==null?void 0:T.toLowerCase())==="cimode")return _?g?{res:`${C}${O}${b}`,usedKey:b,exactUsedKey:b,usedLng:T,usedNS:C,usedParams:this.getUsedParamsDetails(d)}:`${C}${O}${b}`:g?{res:b,usedKey:b,exactUsedKey:b,usedLng:T,usedNS:C,usedParams:this.getUsedParamsDetails(d)}:b;const D=this.resolve(s,d);let M=D==null?void 0:D.res;const B=(D==null?void 0:D.usedKey)||b,H=(D==null?void 0:D.exactUsedKey)||b,J=["[object Number]","[object Function]","[object RegExp]"],K=d.joinArrays!==void 0?d.joinArrays:this.options.joinArrays,ce=!this.i18nFormat||this.i18nFormat.handleAsObject,Y=d.count!==void 0&&!isString(d.count),oe=Translator.hasDefaultValue(d),Ce=Y?this.pluralResolver.getSuffix(T,d.count,d):"",P=d.ordinal&&Y?this.pluralResolver.getSuffix(T,d.count,{ordinal:!1}):"",fe=Y&&!d.ordinal&&d.count===0,te=fe&&d[`defaultValue${this.options.pluralSeparator}zero`]||d[`defaultValue${Ce}`]||d[`defaultValue${P}`]||d.defaultValue;let q=M;ce&&!M&&oe&&(q=te);const We=shouldHandleAsObject(q),ae=Object.prototype.toString.apply(q);if(ce&&q&&We&&J.indexOf(ae)<0&&!(isString(K)&&Array.isArray(q))){if(!d.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(B,q,{...d,ns:S}):`key '${b} (${this.language})' returned an object instead of string.`;return g?(D.res=Q,D.usedParams=this.getUsedParamsDetails(d),D):Q}if(x){const Q=Array.isArray(q),U=Q?[]:{},ne=Q?H:B;for(const G in q)if(Object.prototype.hasOwnProperty.call(q,G)){const Z=`${ne}${x}${G}`;oe&&!M?U[G]=this.translate(Z,{...d,defaultValue:shouldHandleAsObject(te)?te[G]:void 0,joinArrays:!1,ns:S}):U[G]=this.translate(Z,{...d,joinArrays:!1,ns:S}),U[G]===Z&&(U[G]=q[G])}M=U}}else if(ce&&isString(K)&&Array.isArray(M))M=M.join(K),M&&(M=this.extendTranslation(M,s,d,f));else{let Q=!1,U=!1;!this.isValidLookup(M)&&oe&&(Q=!0,M=te),this.isValidLookup(M)||(U=!0,M=b);const G=(d.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:M,Z=oe&&te!==M&&this.options.updateMissing;if(U||Q||Z){if(this.logger.log(Z?"updateKey":"missingKey",T,C,b,Z?te:M),x){const ee=this.resolve(b,{...d,keySeparator:!1});ee&&ee.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ye=[];const se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(let ee=0;ee<se.length;ee++)ye.push(se[ee]);else this.options.saveMissingTo==="all"?ye=this.languageUtils.toResolveHierarchy(d.lng||this.language):ye.push(d.lng||this.language);const ue=(ee,pe,he)=>{var Te;const Le=oe&&he!==M?he:G;this.options.missingKeyHandler?this.options.missingKeyHandler(ee,C,pe,Le,Z,d):(Te=this.backendConnector)!=null&&Te.saveMissing&&this.backendConnector.saveMissing(ee,C,pe,Le,Z,d),this.emit("missingKey",ee,C,pe,M)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Y?ye.forEach(ee=>{const pe=this.pluralResolver.getSuffixes(ee,d);fe&&d[`defaultValue${this.options.pluralSeparator}zero`]&&pe.indexOf(`${this.options.pluralSeparator}zero`)<0&&pe.push(`${this.options.pluralSeparator}zero`),pe.forEach(he=>{ue([ee],b+he,d[`defaultValue${he}`]||te)})}):ue(ye,b,te))}M=this.extendTranslation(M,s,d,D,f),U&&M===b&&this.options.appendNamespaceToMissingKey&&(M=`${C}${O}${b}`),(U||Q)&&this.options.parseMissingKeyHandler&&(M=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${C}${O}${b}`:b,Q?M:void 0,d))}return g?(D.res=M,D.usedParams=this.getUsedParamsDetails(d),D):M}extendTranslation(s,c,f,d,g){var S,C;if((S=this.i18nFormat)!=null&&S.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...f},f.lng||this.language||d.usedLng,d.usedNS,d.usedKey,{resolved:d});else if(!f.skipInterpolation){f.interpolation&&this.interpolator.init({...f,interpolation:{...this.options.interpolation,...f.interpolation}});const O=isString(s)&&(((C=f==null?void 0:f.interpolation)==null?void 0:C.skipOnVariables)!==void 0?f.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let T;if(O){const D=s.match(this.interpolator.nestingRegexp);T=D&&D.length}let _=f.replace&&!isString(f.replace)?f.replace:f;if(this.options.interpolation.defaultVariables&&(_={...this.options.interpolation.defaultVariables,..._}),s=this.interpolator.interpolate(s,_,f.lng||this.language||d.usedLng,f),O){const D=s.match(this.interpolator.nestingRegexp),M=D&&D.length;T<M&&(f.nest=!1)}!f.lng&&d&&d.res&&(f.lng=this.language||d.usedLng),f.nest!==!1&&(s=this.interpolator.nest(s,(...D)=>(g==null?void 0:g[0])===D[0]&&!f.context?(this.logger.warn(`It seems you are nesting recursively key: ${D[0]} in key: ${c[0]}`),null):this.translate(...D,c),f)),f.interpolation&&this.interpolator.reset()}const x=f.postProcess||this.options.postProcess,b=isString(x)?[x]:x;return s!=null&&(b!=null&&b.length)&&f.applyPostProcessor!==!1&&(s=postProcessor.handle(b,s,c,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...d,usedParams:this.getUsedParamsDetails(f)},...f}:f,this)),s}resolve(s,c={}){let f,d,g,x,b;return isString(s)&&(s=[s]),s.forEach(S=>{if(this.isValidLookup(f))return;const C=this.extractFromKey(S,c),O=C.key;d=O;let T=C.namespaces;this.options.fallbackNS&&(T=T.concat(this.options.fallbackNS));const _=c.count!==void 0&&!isString(c.count),D=_&&!c.ordinal&&c.count===0,M=c.context!==void 0&&(isString(c.context)||typeof c.context=="number")&&c.context!=="",B=c.lngs?c.lngs:this.languageUtils.toResolveHierarchy(c.lng||this.language,c.fallbackLng);T.forEach(H=>{var J,K;this.isValidLookup(f)||(b=H,!checkedLoadedFor[`${B[0]}-${H}`]&&((J=this.utils)!=null&&J.hasLoadedNamespace)&&!((K=this.utils)!=null&&K.hasLoadedNamespace(b))&&(checkedLoadedFor[`${B[0]}-${H}`]=!0,this.logger.warn(`key "${d}" for languages "${B.join(", ")}" won't get resolved as namespace "${b}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),B.forEach(ce=>{var Ce;if(this.isValidLookup(f))return;x=ce;const Y=[O];if((Ce=this.i18nFormat)!=null&&Ce.addLookupKeys)this.i18nFormat.addLookupKeys(Y,O,ce,H,c);else{let P;_&&(P=this.pluralResolver.getSuffix(ce,c.count,c));const fe=`${this.options.pluralSeparator}zero`,te=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(_&&(c.ordinal&&P.indexOf(te)===0&&Y.push(O+P.replace(te,this.options.pluralSeparator)),Y.push(O+P),D&&Y.push(O+fe)),M){const q=`${O}${this.options.contextSeparator||"_"}${c.context}`;Y.push(q),_&&(c.ordinal&&P.indexOf(te)===0&&Y.push(q+P.replace(te,this.options.pluralSeparator)),Y.push(q+P),D&&Y.push(q+fe))}}let oe;for(;oe=Y.pop();)this.isValidLookup(f)||(g=oe,f=this.getResource(ce,H,oe,c))}))})}),{res:f,usedKey:d,exactUsedKey:g,usedLng:x,usedNS:b}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,c,f,d={}){var g;return(g=this.i18nFormat)!=null&&g.getResource?this.i18nFormat.getResource(s,c,f,d):this.resourceStore.getResource(s,c,f,d)}getUsedParamsDetails(s={}){const c=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],f=s.replace&&!isString(s.replace);let d=f?s.replace:s;if(f&&typeof s.count<"u"&&(d.count=s.count),this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),!f){d={...d};for(const g of c)delete d[g]}return d}static hasDefaultValue(s){const c="defaultValue";for(const f in s)if(Object.prototype.hasOwnProperty.call(s,f)&&c===f.substring(0,c.length)&&s[f]!==void 0)return!0;return!1}}class LanguageUtil{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(s){if(s=getCleanedCode(s),!s||s.indexOf("-")<0)return null;const c=s.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}getLanguagePartFromCode(s){if(s=getCleanedCode(s),!s||s.indexOf("-")<0)return s;const c=s.split("-");return this.formatLanguageCode(c[0])}formatLanguageCode(s){if(isString(s)&&s.indexOf("-")>-1){let c;try{c=Intl.getCanonicalLocales(s)[0]}catch{}return c&&this.options.lowerCaseLng&&(c=c.toLowerCase()),c||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let c;return s.forEach(f=>{if(c)return;const d=this.formatLanguageCode(f);(!this.options.supportedLngs||this.isSupportedCode(d))&&(c=d)}),!c&&this.options.supportedLngs&&s.forEach(f=>{if(c)return;const d=this.getScriptPartFromCode(f);if(this.isSupportedCode(d))return c=d;const g=this.getLanguagePartFromCode(f);if(this.isSupportedCode(g))return c=g;c=this.options.supportedLngs.find(x=>{if(x===g)return x;if(!(x.indexOf("-")<0&&g.indexOf("-")<0)&&(x.indexOf("-")>0&&g.indexOf("-")<0&&x.substring(0,x.indexOf("-"))===g||x.indexOf(g)===0&&g.length>1))return x})}),c||(c=this.getFallbackCodes(this.options.fallbackLng)[0]),c}getFallbackCodes(s,c){if(!s)return[];if(typeof s=="function"&&(s=s(c)),isString(s)&&(s=[s]),Array.isArray(s))return s;if(!c)return s.default||[];let f=s[c];return f||(f=s[this.getScriptPartFromCode(c)]),f||(f=s[this.formatLanguageCode(c)]),f||(f=s[this.getLanguagePartFromCode(c)]),f||(f=s.default),f||[]}toResolveHierarchy(s,c){const f=this.getFallbackCodes((c===!1?[]:c)||this.options.fallbackLng||[],s),d=[],g=x=>{x&&(this.isSupportedCode(x)?d.push(x):this.logger.warn(`rejecting language code not found in supportedLngs: ${x}`))};return isString(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&g(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&g(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&g(this.getLanguagePartFromCode(s))):isString(s)&&g(this.formatLanguageCode(s)),f.forEach(x=>{d.indexOf(x)<0&&g(this.formatLanguageCode(x))}),d}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:v=>v===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(s,c={}){this.languageUtils=s,this.options=c,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(s,c){this.rules[s]=c}clearCache(){this.pluralRulesCache={}}getRule(s,c={}){const f=getCleanedCode(s==="dev"?"en":s),d=c.ordinal?"ordinal":"cardinal",g=JSON.stringify({cleanedCode:f,type:d});if(g in this.pluralRulesCache)return this.pluralRulesCache[g];let x;try{x=new Intl.PluralRules(f,{type:d})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!s.match(/-|_/))return dummyRule;const S=this.languageUtils.getLanguagePartFromCode(s);x=this.getRule(S,c)}return this.pluralRulesCache[g]=x,x}needsPlural(s,c={}){let f=this.getRule(s,c);return f||(f=this.getRule("dev",c)),(f==null?void 0:f.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(s,c,f={}){return this.getSuffixes(s,f).map(d=>`${c}${d}`)}getSuffixes(s,c={}){let f=this.getRule(s,c);return f||(f=this.getRule("dev",c)),f?f.resolvedOptions().pluralCategories.sort((d,g)=>suffixesOrder[d]-suffixesOrder[g]).map(d=>`${this.options.prepend}${c.ordinal?`ordinal${this.options.prepend}`:""}${d}`):[]}getSuffix(s,c,f={}){const d=this.getRule(s,f);return d?`${this.options.prepend}${f.ordinal?`ordinal${this.options.prepend}`:""}${d.select(c)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",c,f))}}const deepFindWithDefaults=(v,s,c,f=".",d=!0)=>{let g=getPathWithDefaults(v,s,c);return!g&&d&&isString(c)&&(g=deepFind(v,c,f),g===void 0&&(g=deepFind(s,c,f))),g},regexSafe=v=>v.replace(/\$/g,"$$$$");class Interpolator{constructor(s={}){var c;this.logger=baseLogger.create("interpolator"),this.options=s,this.format=((c=s==null?void 0:s.interpolation)==null?void 0:c.format)||(f=>f),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:c,escapeValue:f,useRawValueToEscape:d,prefix:g,prefixEscaped:x,suffix:b,suffixEscaped:S,formatSeparator:C,unescapeSuffix:O,unescapePrefix:T,nestingPrefix:_,nestingPrefixEscaped:D,nestingSuffix:M,nestingSuffixEscaped:B,nestingOptionsSeparator:H,maxReplaces:J,alwaysFormat:K}=s.interpolation;this.escape=c!==void 0?c:escape,this.escapeValue=f!==void 0?f:!0,this.useRawValueToEscape=d!==void 0?d:!1,this.prefix=g?regexEscape(g):x||"{{",this.suffix=b?regexEscape(b):S||"}}",this.formatSeparator=C||",",this.unescapePrefix=O?"":T||"-",this.unescapeSuffix=this.unescapePrefix?"":O||"",this.nestingPrefix=_?regexEscape(_):D||regexEscape("$t("),this.nestingSuffix=M?regexEscape(M):B||regexEscape(")"),this.nestingOptionsSeparator=H||",",this.maxReplaces=J||1e3,this.alwaysFormat=K!==void 0?K:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(c,f)=>(c==null?void 0:c.source)===f?(c.lastIndex=0,c):new RegExp(f,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,c,f,d){var D;let g,x,b;const S=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},C=M=>{if(M.indexOf(this.formatSeparator)<0){const K=deepFindWithDefaults(c,S,M,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(K,void 0,f,{...d,...c,interpolationkey:M}):K}const B=M.split(this.formatSeparator),H=B.shift().trim(),J=B.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(c,S,H,this.options.keySeparator,this.options.ignoreJSONStructure),J,f,{...d,...c,interpolationkey:H})};this.resetRegExp();const O=(d==null?void 0:d.missingInterpolationHandler)||this.options.missingInterpolationHandler,T=((D=d==null?void 0:d.interpolation)==null?void 0:D.skipOnVariables)!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:M=>regexSafe(M)},{regex:this.regexp,safeValue:M=>this.escapeValue?regexSafe(this.escape(M)):regexSafe(M)}].forEach(M=>{for(b=0;g=M.regex.exec(s);){const B=g[1].trim();if(x=C(B),x===void 0)if(typeof O=="function"){const J=O(s,g,d);x=isString(J)?J:""}else if(d&&Object.prototype.hasOwnProperty.call(d,B))x="";else if(T){x=g[0];continue}else this.logger.warn(`missed to pass in variable ${B} for interpolating ${s}`),x="";else!isString(x)&&!this.useRawValueToEscape&&(x=makeString(x));const H=M.safeValue(x);if(s=s.replace(g[0],H),T?(M.regex.lastIndex+=x.length,M.regex.lastIndex-=g[0].length):M.regex.lastIndex=0,b++,b>=this.maxReplaces)break}}),s}nest(s,c,f={}){let d,g,x;const b=(S,C)=>{const O=this.nestingOptionsSeparator;if(S.indexOf(O)<0)return S;const T=S.split(new RegExp(`${O}[ ]*{`));let _=`{${T[1]}`;S=T[0],_=this.interpolate(_,x);const D=_.match(/'/g),M=_.match(/"/g);(((D==null?void 0:D.length)??0)%2===0&&!M||M.length%2!==0)&&(_=_.replace(/'/g,'"'));try{x=JSON.parse(_),C&&(x={...C,...x})}catch(B){return this.logger.warn(`failed parsing options string in nesting for key ${S}`,B),`${S}${O}${_}`}return x.defaultValue&&x.defaultValue.indexOf(this.prefix)>-1&&delete x.defaultValue,S};for(;d=this.nestingRegexp.exec(s);){let S=[];x={...f},x=x.replace&&!isString(x.replace)?x.replace:x,x.applyPostProcessor=!1,delete x.defaultValue;const C=/{.*}/.test(d[1])?d[1].lastIndexOf("}")+1:d[1].indexOf(this.formatSeparator);if(C!==-1&&(S=d[1].slice(C).split(this.formatSeparator).map(O=>O.trim()).filter(Boolean),d[1]=d[1].slice(0,C)),g=c(b.call(this,d[1].trim(),x),x),g&&d[0]===s&&!isString(g))return g;isString(g)||(g=makeString(g)),g||(this.logger.warn(`missed to resolve ${d[1]} for nesting ${s}`),g=""),S.length&&(g=S.reduce((O,T)=>this.format(O,T,f.lng,{...f,interpolationkey:d[1].trim()}),g.trim())),s=s.replace(d[0],g),this.regexp.lastIndex=0}return s}}const parseFormatStr=v=>{let s=v.toLowerCase().trim();const c={};if(v.indexOf("(")>-1){const f=v.split("(");s=f[0].toLowerCase().trim();const d=f[1].substring(0,f[1].length-1);s==="currency"&&d.indexOf(":")<0?c.currency||(c.currency=d.trim()):s==="relativetime"&&d.indexOf(":")<0?c.range||(c.range=d.trim()):d.split(";").forEach(x=>{if(x){const[b,...S]=x.split(":"),C=S.join(":").trim().replace(/^'+|'+$/g,""),O=b.trim();c[O]||(c[O]=C),C==="false"&&(c[O]=!1),C==="true"&&(c[O]=!0),isNaN(C)||(c[O]=parseInt(C,10))}})}return{formatName:s,formatOptions:c}},createCachedFormatter=v=>{const s={};return(c,f,d)=>{let g=d;d&&d.interpolationkey&&d.formatParams&&d.formatParams[d.interpolationkey]&&d[d.interpolationkey]&&(g={...g,[d.interpolationkey]:void 0});const x=f+JSON.stringify(g);let b=s[x];return b||(b=v(getCleanedCode(f),d),s[x]=b),b(c)}},createNonCachedFormatter=v=>(s,c,f)=>v(getCleanedCode(c),f)(s);class Formatter{constructor(s={}){this.logger=baseLogger.create("formatter"),this.options=s,this.init(s)}init(s,c={interpolation:{}}){this.formatSeparator=c.interpolation.formatSeparator||",";const f=c.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:f((d,g)=>{const x=new Intl.NumberFormat(d,{...g});return b=>x.format(b)}),currency:f((d,g)=>{const x=new Intl.NumberFormat(d,{...g,style:"currency"});return b=>x.format(b)}),datetime:f((d,g)=>{const x=new Intl.DateTimeFormat(d,{...g});return b=>x.format(b)}),relativetime:f((d,g)=>{const x=new Intl.RelativeTimeFormat(d,{...g});return b=>x.format(b,g.range||"day")}),list:f((d,g)=>{const x=new Intl.ListFormat(d,{...g});return b=>x.format(b)})}}add(s,c){this.formats[s.toLowerCase().trim()]=c}addCached(s,c){this.formats[s.toLowerCase().trim()]=createCachedFormatter(c)}format(s,c,f,d={}){const g=c.split(this.formatSeparator);if(g.length>1&&g[0].indexOf("(")>1&&g[0].indexOf(")")<0&&g.find(b=>b.indexOf(")")>-1)){const b=g.findIndex(S=>S.indexOf(")")>-1);g[0]=[g[0],...g.splice(1,b)].join(this.formatSeparator)}return g.reduce((b,S)=>{var T;const{formatName:C,formatOptions:O}=parseFormatStr(S);if(this.formats[C]){let _=b;try{const D=((T=d==null?void 0:d.formatParams)==null?void 0:T[d.interpolationkey])||{},M=D.locale||D.lng||d.locale||d.lng||f;_=this.formats[C](b,M,{...O,...d,...D})}catch(D){this.logger.warn(D)}return _}else this.logger.warn(`there was no format function for ${C}`);return b},s)}}const removePending=(v,s)=>{v.pending[s]!==void 0&&(delete v.pending[s],v.pendingCount--)};class Connector extends EventEmitter{constructor(s,c,f,d={}){var g,x;super(),this.backend=s,this.store=c,this.services=f,this.languageUtils=f.languageUtils,this.options=d,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=d.maxParallelReads||10,this.readingCalls=0,this.maxRetries=d.maxRetries>=0?d.maxRetries:5,this.retryTimeout=d.retryTimeout>=1?d.retryTimeout:350,this.state={},this.queue=[],(x=(g=this.backend)==null?void 0:g.init)==null||x.call(g,f,d.backend,d)}queueLoad(s,c,f,d){const g={},x={},b={},S={};return s.forEach(C=>{let O=!0;c.forEach(T=>{const _=`${C}|${T}`;!f.reload&&this.store.hasResourceBundle(C,T)?this.state[_]=2:this.state[_]<0||(this.state[_]===1?x[_]===void 0&&(x[_]=!0):(this.state[_]=1,O=!1,x[_]===void 0&&(x[_]=!0),g[_]===void 0&&(g[_]=!0),S[T]===void 0&&(S[T]=!0)))}),O||(b[C]=!0)}),(Object.keys(g).length||Object.keys(x).length)&&this.queue.push({pending:x,pendingCount:Object.keys(x).length,loaded:{},errors:[],callback:d}),{toLoad:Object.keys(g),pending:Object.keys(x),toLoadLanguages:Object.keys(b),toLoadNamespaces:Object.keys(S)}}loaded(s,c,f){const d=s.split("|"),g=d[0],x=d[1];c&&this.emit("failedLoading",g,x,c),!c&&f&&this.store.addResourceBundle(g,x,f,void 0,void 0,{skipCopy:!0}),this.state[s]=c?-1:2,c&&f&&(this.state[s]=0);const b={};this.queue.forEach(S=>{pushPath(S.loaded,[g],x),removePending(S,s),c&&S.errors.push(c),S.pendingCount===0&&!S.done&&(Object.keys(S.loaded).forEach(C=>{b[C]||(b[C]={});const O=S.loaded[C];O.length&&O.forEach(T=>{b[C][T]===void 0&&(b[C][T]=!0)})}),S.done=!0,S.errors.length?S.callback(S.errors):S.callback())}),this.emit("loaded",b),this.queue=this.queue.filter(S=>!S.done)}read(s,c,f,d=0,g=this.retryTimeout,x){if(!s.length)return x(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:c,fcName:f,tried:d,wait:g,callback:x});return}this.readingCalls++;const b=(C,O)=>{if(this.readingCalls--,this.waitingReads.length>0){const T=this.waitingReads.shift();this.read(T.lng,T.ns,T.fcName,T.tried,T.wait,T.callback)}if(C&&O&&d<this.maxRetries){setTimeout(()=>{this.read.call(this,s,c,f,d+1,g*2,x)},g);return}x(C,O)},S=this.backend[f].bind(this.backend);if(S.length===2){try{const C=S(s,c);C&&typeof C.then=="function"?C.then(O=>b(null,O)).catch(b):b(null,C)}catch(C){b(C)}return}return S(s,c,b)}prepareLoading(s,c,f={},d){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),d&&d();isString(s)&&(s=this.languageUtils.toResolveHierarchy(s)),isString(c)&&(c=[c]);const g=this.queueLoad(s,c,f,d);if(!g.toLoad.length)return g.pending.length||d(),null;g.toLoad.forEach(x=>{this.loadOne(x)})}load(s,c,f){this.prepareLoading(s,c,{},f)}reload(s,c,f){this.prepareLoading(s,c,{reload:!0},f)}loadOne(s,c=""){const f=s.split("|"),d=f[0],g=f[1];this.read(d,g,"read",void 0,void 0,(x,b)=>{x&&this.logger.warn(`${c}loading namespace ${g} for language ${d} failed`,x),!x&&b&&this.logger.log(`${c}loaded namespace ${g} for language ${d}`,b),this.loaded(s,x,b)})}saveMissing(s,c,f,d,g,x={},b=()=>{}){var S,C,O,T,_;if((C=(S=this.services)==null?void 0:S.utils)!=null&&C.hasLoadedNamespace&&!((T=(O=this.services)==null?void 0:O.utils)!=null&&T.hasLoadedNamespace(c))){this.logger.warn(`did not save key "${f}" as the namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(f==null||f==="")){if((_=this.backend)!=null&&_.create){const D={...x,isUpdate:g},M=this.backend.create.bind(this.backend);if(M.length<6)try{let B;M.length===5?B=M(s,c,f,d,D):B=M(s,c,f,d),B&&typeof B.then=="function"?B.then(H=>b(null,H)).catch(b):b(null,B)}catch(B){b(B)}else M(s,c,f,d,b,D)}!s||!s[0]||this.store.addResource(s[0],c,f,d)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:v=>{let s={};if(typeof v[1]=="object"&&(s=v[1]),isString(v[1])&&(s.defaultValue=v[1]),isString(v[2])&&(s.tDescription=v[2]),typeof v[2]=="object"||typeof v[3]=="object"){const c=v[3]||v[2];Object.keys(c).forEach(f=>{s[f]=c[f]})}return s},interpolation:{escapeValue:!0,format:v=>v,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=v=>{var s,c;return isString(v.ns)&&(v.ns=[v.ns]),isString(v.fallbackLng)&&(v.fallbackLng=[v.fallbackLng]),isString(v.fallbackNS)&&(v.fallbackNS=[v.fallbackNS]),((c=(s=v.supportedLngs)==null?void 0:s.indexOf)==null?void 0:c.call(s,"cimode"))<0&&(v.supportedLngs=v.supportedLngs.concat(["cimode"])),typeof v.initImmediate=="boolean"&&(v.initAsync=v.initImmediate),v},noop=()=>{},bindMemberFunctions=v=>{Object.getOwnPropertyNames(Object.getPrototypeOf(v)).forEach(c=>{typeof v[c]=="function"&&(v[c]=v[c].bind(v))})};class I18n extends EventEmitter{constructor(s={},c){if(super(),this.options=transformOptions(s),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),c&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,c),this;setTimeout(()=>{this.init(s,c)},0)}}init(s={},c){this.isInitializing=!0,typeof s=="function"&&(c=s,s={}),s.defaultNS==null&&s.ns&&(isString(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const f=get();this.options={...f,...this.options,...transformOptions(s)},this.options.interpolation={...f.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const d=C=>C?typeof C=="function"?new C:C:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(d(this.modules.logger),this.options):baseLogger.init(null,this.options);let C;this.modules.formatter?C=this.modules.formatter:C=Formatter;const O=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const T=this.services;T.logger=baseLogger,T.resourceStore=this.store,T.languageUtils=O,T.pluralResolver=new PluralResolver(O,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==f.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),C&&(!this.options.interpolation.format||this.options.interpolation.format===f.interpolation.format)&&(T.formatter=d(C),T.formatter.init&&T.formatter.init(T,this.options),this.options.interpolation.format=T.formatter.format.bind(T.formatter)),T.interpolator=new Interpolator(this.options),T.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},T.backendConnector=new Connector(d(this.modules.backend),T.resourceStore,T,this.options),T.backendConnector.on("*",(D,...M)=>{this.emit(D,...M)}),this.modules.languageDetector&&(T.languageDetector=d(this.modules.languageDetector),T.languageDetector.init&&T.languageDetector.init(T,this.options.detection,this.options)),this.modules.i18nFormat&&(T.i18nFormat=d(this.modules.i18nFormat),T.i18nFormat.init&&T.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",(D,...M)=>{this.emit(D,...M)}),this.modules.external.forEach(D=>{D.init&&D.init(this)})}if(this.format=this.options.interpolation.format,c||(c=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const C=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);C.length>0&&C[0]!=="dev"&&(this.options.lng=C[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(C=>{this[C]=(...O)=>this.store[C](...O)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(C=>{this[C]=(...O)=>(this.store[C](...O),this)});const b=defer(),S=()=>{const C=(O,T)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),b.resolve(T),c(O,T)};if(this.languages&&!this.isInitialized)return C(null,this.t.bind(this));this.changeLanguage(this.options.lng,C)};return this.options.resources||!this.options.initAsync?S():setTimeout(S,0),b}loadResources(s,c=noop){var g,x;let f=c;const d=isString(s)?s:this.language;if(typeof s=="function"&&(f=s),!this.options.resources||this.options.partialBundledLanguages){if((d==null?void 0:d.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return f();const b=[],S=C=>{if(!C||C==="cimode")return;this.services.languageUtils.toResolveHierarchy(C).forEach(T=>{T!=="cimode"&&b.indexOf(T)<0&&b.push(T)})};d?S(d):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(O=>S(O)),(x=(g=this.options.preload)==null?void 0:g.forEach)==null||x.call(g,C=>S(C)),this.services.backendConnector.load(b,this.options.ns,C=>{!C&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),f(C)})}else f(null)}reloadResources(s,c,f){const d=defer();return typeof s=="function"&&(f=s,s=void 0),typeof c=="function"&&(f=c,c=void 0),s||(s=this.languages),c||(c=this.options.ns),f||(f=noop),this.services.backendConnector.reload(s,c,g=>{d.resolve(),f(g)}),d}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&postProcessor.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let c=0;c<this.languages.length;c++){const f=this.languages[c];if(!(["cimode","dev"].indexOf(f)>-1)&&this.store.hasLanguageSomeTranslations(f)){this.resolvedLanguage=f;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,c){this.isLanguageChangingTo=s;const f=defer();this.emit("languageChanging",s);const d=b=>{this.language=b,this.languages=this.services.languageUtils.toResolveHierarchy(b),this.resolvedLanguage=void 0,this.setResolvedLanguage(b)},g=(b,S)=>{S?this.isLanguageChangingTo===s&&(d(S),this.translator.changeLanguage(S),this.isLanguageChangingTo=void 0,this.emit("languageChanged",S),this.logger.log("languageChanged",S)):this.isLanguageChangingTo=void 0,f.resolve((...C)=>this.t(...C)),c&&c(b,(...C)=>this.t(...C))},x=b=>{var O,T;!s&&!b&&this.services.languageDetector&&(b=[]);const S=isString(b)?b:b&&b[0],C=this.store.hasLanguageSomeTranslations(S)?S:this.services.languageUtils.getBestMatchFromCodes(isString(b)?[b]:b);C&&(this.language||d(C),this.translator.language||this.translator.changeLanguage(C),(T=(O=this.services.languageDetector)==null?void 0:O.cacheUserLanguage)==null||T.call(O,C)),this.loadResources(C,_=>{g(_,C)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?x(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(x):this.services.languageDetector.detect(x):x(s),f}getFixedT(s,c,f){const d=(g,x,...b)=>{let S;typeof x!="object"?S=this.options.overloadTranslationOptionHandler([g,x].concat(b)):S={...x},S.lng=S.lng||d.lng,S.lngs=S.lngs||d.lngs,S.ns=S.ns||d.ns,S.keyPrefix!==""&&(S.keyPrefix=S.keyPrefix||f||d.keyPrefix);const C=this.options.keySeparator||".";let O;return S.keyPrefix&&Array.isArray(g)?O=g.map(T=>`${S.keyPrefix}${C}${T}`):O=S.keyPrefix?`${S.keyPrefix}${C}${g}`:g,this.t(O,S)};return isString(s)?d.lng=s:d.lngs=s,d.ns=c,d.keyPrefix=f,d}t(...s){var c;return(c=this.translator)==null?void 0:c.translate(...s)}exists(...s){var c;return(c=this.translator)==null?void 0:c.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,c={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const f=c.lng||this.resolvedLanguage||this.languages[0],d=this.options?this.options.fallbackLng:!1,g=this.languages[this.languages.length-1];if(f.toLowerCase()==="cimode")return!0;const x=(b,S)=>{const C=this.services.backendConnector.state[`${b}|${S}`];return C===-1||C===0||C===2};if(c.precheck){const b=c.precheck(this,x);if(b!==void 0)return b}return!!(this.hasResourceBundle(f,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||x(f,s)&&(!d||x(g,s)))}loadNamespaces(s,c){const f=defer();return this.options.ns?(isString(s)&&(s=[s]),s.forEach(d=>{this.options.ns.indexOf(d)<0&&this.options.ns.push(d)}),this.loadResources(d=>{f.resolve(),c&&c(d)}),f):(c&&c(),Promise.resolve())}loadLanguages(s,c){const f=defer();isString(s)&&(s=[s]);const d=this.options.preload||[],g=s.filter(x=>d.indexOf(x)<0&&this.services.languageUtils.isSupportedCode(x));return g.length?(this.options.preload=d.concat(g),this.loadResources(x=>{f.resolve(),c&&c(x)}),f):(c&&c(),Promise.resolve())}dir(s){var d,g;if(s||(s=this.resolvedLanguage||(((d=this.languages)==null?void 0:d.length)>0?this.languages[0]:this.language)),!s)return"rtl";try{const x=new Intl.Locale(s);if(x&&x.getTextInfo){const b=x.getTextInfo();if(b&&b.direction)return b.direction}}catch{}const c=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],f=((g=this.services)==null?void 0:g.languageUtils)||new LanguageUtil(get());return s.toLowerCase().indexOf("-latn")>1?"ltr":c.indexOf(f.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},c){return new I18n(s,c)}cloneInstance(s={},c=noop){const f=s.forkResourceStore;f&&delete s.forkResourceStore;const d={...this.options,...s,isClone:!0},g=new I18n(d);if((s.debug!==void 0||s.prefix!==void 0)&&(g.logger=g.logger.clone(s)),["store","services","language"].forEach(b=>{g[b]=this[b]}),g.services={...this.services},g.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},f){const b=Object.keys(this.store.data).reduce((S,C)=>(S[C]={...this.store.data[C]},S[C]=Object.keys(S[C]).reduce((O,T)=>(O[T]={...S[C][T]},O),S[C]),S),{});g.store=new ResourceStore(b,d),g.services.resourceStore=g.store}return g.translator=new Translator(g.services,d),g.translator.on("*",(b,...S)=>{g.emit(b,...S)}),g.init(d,c),g.translator.options=d,g.translator.backendConnector.services.utils={hasLoadedNamespace:g.hasLoadedNamespace.bind(g)},g}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const translation$1={cardProperties:"Card Properties",cardName:"Card Name",deleteCard:"Delete Card",deleteCardConfirmation:`Delete card "{{cardName}}".
This action cannot be undone. Are you sure?`,deleteObject:"Delete Object",deleteObjectConfirmation:`Delete {{objectType}}?
This action cannot be undone. Are you sure?`,lastCardWarning:"This is the last card and cannot be deleted.",objectProperties:"Properties: {{type}}",noObjectSelected:"No object selected.",text:"Text",textAlign:"Text Align",alignLeft:"Left",alignCenter:"Center",alignRight:"Right",borderWidth:"Border Width",borderNone:"None",borderThin:"Thin",borderMedium:"Medium",borderThick:"Thick",fontSize:"Font Size",fontWeight:"Font Weight",fontWeightNormal:"Normal",fontWeightBold:"Bold",fontStyle:"Font Style",fontStyleNormal:"Normal",fontStyleItalic:"Italic",textDecoration:"Text Decoration",textDecorationNone:"None",textDecorationUnderline:"Underline",color:"Color",fontFamily:"Font Family",imageSource:"Image Source",imageName:"Image Name",objectFit:"Image Fit",objectFitContain:"Maintain Aspect Ratio",objectFitFill:"Stretch to Fill",welcomeCardName:"Welcome to Hi-Packa (Tentative)!",welcomeTitle:"Welcome to Hi-Packa (Tentative)!",welcomeInstruction:`Right-click on the canvas to add new objects.
Select an object to edit its properties on the right panel.`,startButton:"Start Building",aboutCardName:"What is Hi-Packa (Tentative)?",aboutTitle:"What is Hi-Packa (Tentative)?",aboutDescription:"Hi-Packa is a minimal authoring tool that re-implements the spirit of HyperCard with modern web technologies.",backButton:"Back",action:"Action",actionNone:"None",actionGoToCard:"Go to Card",destination:"Destination",scriptOnClick:"Script (onclick)",magicPlaceholder:"To edit, type 'Magic'...",addNewCard:"+ New Card",newCardName:"Card {{number}}",defaultButtonText:"Button",defaultTextBoxText:"Text Box",contextMenuAddButton:"Add Button",contextMenuAddText:"Add Text",contextMenuAddImage:"Add Image",settings:"Settings",enterMagicWord:"Enter Magic Word:",magicEnabled:"Magic is enabled!",aiHelperLink:"https://gemini.google.com/app",aiHelperText:"Ask AI for script ideas",runMode:"Run",editMode:"Edit",exportHtml:"Export HTML"},en={translation:translation$1},translation={cardProperties:"",cardName:"",deleteCard:"",deleteCardConfirmation:`"{{cardName}}"
`,deleteObject:"",deleteObjectConfirmation:`{{objectType}}
`,lastCardWarning:"",objectProperties:": {{type}}",noObjectSelected:"",text:"",textAlign:"",alignLeft:"",alignCenter:"",alignRight:"",borderWidth:"",borderNone:"",borderThin:"",borderMedium:"",borderThick:"",fontSize:"",fontWeight:"",fontWeightNormal:"",fontWeightBold:"",fontStyle:"",fontStyleNormal:"",fontStyleItalic:"",textDecoration:"",textDecorationNone:"",textDecorationUnderline:"",color:"",fontFamily:"",imageSource:"",imageName:"",objectFit:"",objectFitContain:"",objectFitFill:"",welcomeCardName:"",welcomeTitle:"",welcomeInstruction:`
`,startButton:"",aboutCardName:"",aboutTitle:"",aboutDescription:"HyperCardWeb",backButton:"",action:"",actionNone:"",actionGoToCard:"",destination:"",scriptOnClick:" (onclick)",magicPlaceholder:" 'Magic' ...",addNewCard:"+ ",newCardName:" {{number}}",defaultButtonText:"",defaultTextBoxText:"",contextMenuAddButton:"",contextMenuAddText:"",contextMenuAddImage:"",settings:"",enterMagicWord:":",magicEnabled:"Magic",aiHelperLink:"https://gemini.google.com/app",aiHelperText:"AI",runMode:"",editMode:"",exportHtml:"HTML"},ja={translation};instance.init({lng:"ja",fallbackLng:"en",resources:{en:{translation:en.translation},ja:{translation:ja.translation}},interpolation:{escapeValue:!1}});const t=instance.t.bind(instance),borderWidthMap={none:"0px",thin:"1px",medium:"2px",thick:"4px"};let isMagicEnabled=!1,isRunMode=!1;const app=document.querySelector("#app"),cardListPanel=document.createElement("div");cardListPanel.id="card-list-panel";const mainContent=document.createElement("div");mainContent.id="main-content";const propertiesPanel=document.createElement("div");propertiesPanel.id="properties-panel";const canvas=document.createElement("div");canvas.id="card-canvas";mainContent.appendChild(canvas);app.appendChild(cardListPanel);app.appendChild(mainContent);app.appendChild(propertiesPanel);const welcomeCardId="card-welcome",aboutCardId="card-about",stack={cards:[{id:welcomeCardId,name:t("welcomeCardName"),objects:[{id:`obj-welcome-title-${Date.now()}`,type:"text",x:100,y:100,width:300,height:50,text:t("welcomeTitle"),textAlign:"center",fontSize:"24px",fontWeight:"bold",fontFamily:"sans-serif",color:"#333333",borderWidth:"none",script:""},{id:`obj-welcome-instruction-${Date.now()}`,type:"text",x:50,y:180,width:400,height:80,text:t("welcomeInstruction"),textAlign:"left",fontSize:"16px",fontFamily:"sans-serif",color:"#333333",borderWidth:"none",script:""},{id:`obj-start-button-${Date.now()}`,type:"button",x:200,y:300,width:100,height:40,text:t("startButton"),action:"jumpToCard",jumpToCardId:aboutCardId,textAlign:"center",borderWidth:"thin",script:""}]},{id:aboutCardId,name:t("aboutCardName"),objects:[{id:`obj-about-title-${Date.now()}`,type:"text",x:100,y:100,width:300,height:50,text:t("aboutTitle"),textAlign:"center",fontSize:"24px",fontWeight:"bold",fontFamily:"sans-serif",color:"#333333",borderWidth:"none",script:""},{id:`obj-about-desc-${Date.now()}`,type:"text",x:50,y:180,width:400,height:100,text:t("aboutDescription"),textAlign:"left",fontSize:"16px",fontFamily:"sans-serif",color:"#333333",borderWidth:"none",script:""},{id:`obj-back-button-${Date.now()}`,type:"button",x:200,y:300,width:100,height:40,text:t("backButton"),action:"jumpToCard",jumpToCardId:welcomeCardId,textAlign:"center",borderWidth:"thin",script:""}]}],currentCardId:welcomeCardId};let selectedObject=null;const getCurrentCard=()=>stack.cards.find(v=>v.id===stack.currentCardId),renderAll=()=>{document.body.classList.toggle("run-mode-active",isRunMode),renderCardList(),renderCanvas(),updatePropertiesPanel(selectedObject)},renderCardList=()=>{if(cardListPanel.innerHTML="",!isRunMode){const x=document.createElement("div");x.id="card-list-container",stack.cards.forEach((S,C)=>{const O=document.createElement("div");O.className="card-list-item",O.textContent=`${C+1}. ${S.name}`,S.id===stack.currentCardId&&O.classList.add("is-active"),O.addEventListener("click",()=>switchCard(S.id)),x.appendChild(O)}),cardListPanel.appendChild(x);const b=document.createElement("button");b.id="add-card-btn",b.textContent=t("addNewCard"),b.addEventListener("click",addNewCard),cardListPanel.appendChild(b)}const v=document.createElement("div");v.id="footer-controls";const s=document.createElement("button");s.textContent=t("settings"),s.onclick=()=>{document.querySelector(".modal-overlay").style.display="flex"};const c=document.createElement("button");c.textContent=t(isRunMode?"editMode":"runMode"),c.onclick=()=>{isRunMode=!isRunMode,renderAll()};const f=document.createElement("button");f.textContent=t("exportHtml"),f.onclick=exportToHtml;const d=document.createElement("button");d.textContent="English",d.onclick=()=>{instance.changeLanguage("en").then(renderAll)};const g=document.createElement("button");g.textContent="",g.onclick=()=>{instance.changeLanguage("ja").then(renderAll)},v.appendChild(s),v.appendChild(c),v.appendChild(f),v.appendChild(d),v.appendChild(g),cardListPanel.appendChild(v)},renderCanvas=()=>{canvas.innerHTML="";const v=getCurrentCard();v&&v.objects.forEach(s=>{const c=createDOMElement(s);canvas.appendChild(c),makeInteractive(c,s)})},createDOMElement=obj=>{let element;return obj.type==="button"?element=document.createElement("button"):obj.type==="image"?(element=document.createElement("img"),element.src=obj.src||"",element.style.objectFit=obj.objectFit||"contain"):(element=document.createElement("div"),obj.type==="text"&&(obj.fontSize&&(element.style.fontSize=obj.fontSize),obj.fontWeight&&(element.style.fontWeight=obj.fontWeight),obj.fontStyle&&(element.style.fontStyle=obj.fontStyle),obj.textDecoration&&(element.style.textDecoration=obj.textDecoration),obj.color&&(element.style.color=obj.color),obj.fontFamily&&(element.style.fontFamily=obj.fontFamily))),element.textContent=obj.text,element.classList.add("stack-object"),element.style.left=obj.x+"px",element.style.top=obj.y+"px",element.style.width=obj.width+"px",element.style.height=obj.height+"px",element.style.textAlign=obj.textAlign,element.style.borderStyle="solid",element.style.borderWidth=borderWidthMap[obj.borderWidth],element.setAttribute("data-id",obj.id),obj.id===(selectedObject==null?void 0:selectedObject.id)&&!isRunMode&&element.classList.add("is-selected"),element.addEventListener("click",e=>{if(e.stopPropagation(),isRunMode){if(obj.type==="button"){if(obj.action==="jumpToCard"&&obj.jumpToCardId)switchCard(obj.jumpToCardId);else if(obj.script)try{eval(obj.script)}catch(v){console.error("Script execution error:",v),alert(`Script error: ${v.message}`)}}}else selectObject(obj)}),element},switchCard=v=>{selectedObject=null,stack.currentCardId=v,renderAll()},addNewCard=()=>{const v=`card-${Date.now()}`,s={id:v,name:t("newCardName",{number:stack.cards.length+1}),objects:[]};stack.cards.push(s),switchCard(v)},exportToHtml=()=>{const v=JSON.parse(JSON.stringify(stack)),c=`<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exported Hi-Packa Stack</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: sans-serif; }
        #exported-canvas {
            position: relative;
            width: 800px; /* Adjust as needed */
            height: 600px; /* Adjust as needed */
            border: 1px solid #ccc;
            margin: 20px auto;
            background-color: #f0f0f0;
            overflow: hidden;
        }
        .stack-object {
            position: absolute;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px;
            word-break: break-all;
        }
        .text-object {
            background-color: #fff;
            border: 1px solid #aaa;
        }
        button {
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
        }
        /* Border styles */
        .border-none { border-width: 0px !important; }
        .border-thin { border-width: 1px !important; }
        .border-medium { border-width: 2px !important; }
        .border-thick { border-width: 4px !important; }
    </style>
</head>
<body>
    <div id="exported-canvas"></div>

    <script>
        const stackData = ${JSON.stringify(v,null,2)};
        let currentCardId = stackData.currentCardId;
        const exportedCanvas = document.getElementById('exported-canvas');

        const borderWidthMap = {
            none: '0px',
            thin: '1px',
            medium: '2px',
            thick: '4px',
        };

        const renderCard = (cardId) => {
            exportedCanvas.innerHTML = '';
            const currentCard = stackData.cards.find(c => c.id === cardId);
            if (!currentCard) return;

            currentCard.objects.forEach(obj => {
                let element;
                if (obj.type === 'button') {
                    element = document.createElement('button') as HTMLElement;
                } else {
                    element = document.createElement('div') as HTMLElement;
                }
                element.textContent = obj.text;
                element.classList.add('stack-object');
                element.style.left = obj.x + 'px';
                element.style.top = obj.y + 'px';
                element.style.width = obj.width + 'px';
                element.style.height = obj.height + 'px';
                element.style.textAlign = obj.textAlign;
                element.style.borderStyle = 'solid';
                element.style.borderWidth = borderWidthMap[obj.borderWidth];
                element.style.borderColor = '#333'; // Default border color for exported elements

                if (obj.type === 'button') {
                    element.addEventListener('click', () => {
                        if (obj.action === 'jumpToCard' && obj.jumpToCardId) {
                            currentCardId = obj.jumpToCardId;
                            renderCard(currentCardId);
                        } else if (obj.script) {
                            try {
                                // WARNING: eval is dangerous. For exported content, consider safer alternatives.
                                eval(obj.script);
                            } catch (error: unknown) {
                                console.error('Script execution error:', error as Error);
                            }
                        }
                    });
                }
                exportedCanvas.appendChild(element);
            });
        };

        // Initial render
        renderCard(currentCardId);
    <\/script>
</body>
</html>`,f=new Blob([c],{type:"text/html"}),d=URL.createObjectURL(f),g=document.createElement("a");g.href=d,g.download="hi-packa-exported.html",document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(d)},deleteCurrentCard=()=>{if(stack.cards.length<=1){alert(t("lastCardWarning"));return}const v=getCurrentCard();if(v&&window.confirm(t("deleteCardConfirmation",{cardName:v.name}))){const s=stack.cards.findIndex(f=>f.id===v.id);stack.cards.splice(s,1);const c=Math.max(0,s-1);switchCard(stack.cards[c].id)}},deleteObject=v=>{const s=getCurrentCard();s&&window.confirm(t("deleteObjectConfirmation",{objectType:t(v.type)}))&&(s.objects=s.objects.filter(c=>c.id!==v.id),selectedObject=null,renderAll())},updatePropertiesPanel=v=>{if(propertiesPanel.innerHTML="",isRunMode){propertiesPanel.style.display="none";return}else propertiesPanel.style.display="block";const s=(O,T,_,D="text")=>{const M=document.createElement("div");M.className="prop-group";const B=document.createElement("label");B.textContent=O;const H=document.createElement("input");H.type=D,H.value=String(T),H.addEventListener("input",()=>_(H.value)),M.appendChild(B),M.appendChild(H),propertiesPanel.appendChild(M)},c=(O,T,_,D)=>{const M=document.createElement("div");M.className="prop-group";const B=document.createElement("label");B.textContent=O;const H=document.createElement("select");_.forEach(J=>{const K=document.createElement("option");K.value=J.value,K.textContent=J.text,H.appendChild(K)}),H.value=T,H.addEventListener("change",()=>D(H.value)),M.appendChild(B),M.appendChild(H),propertiesPanel.appendChild(M)},f=(O,T,_)=>{const D=document.createElement("div");D.className="prop-group";const M=document.createElement("label");M.textContent=O;const B=document.createElement("textarea");B.value=T,B.addEventListener("input",()=>_(B.value)),D.appendChild(M),D.appendChild(B),propertiesPanel.appendChild(D)};if(!v){const O=getCurrentCard();if(!O)return;const T=document.createElement("h3");T.textContent=t("cardProperties"),propertiesPanel.appendChild(T),s(t("cardName"),O.name,D=>{O.name=D,renderCardList()});const _=document.createElement("button");_.textContent=t("deleteCard"),_.className="delete-btn",_.addEventListener("click",deleteCurrentCard),propertiesPanel.appendChild(_);return}const d=document.createElement("h3");if(d.textContent=t("objectProperties",{type:v.type}),propertiesPanel.appendChild(d),v.type==="text"?f(t("text"),v.text,O=>{v.text=O,renderCanvas()}):v.type==="image"?s(t("imageName"),v.text,O=>{v.text=O,renderCanvas()}):s(t("text"),v.text,O=>{v.text=O,renderCanvas()}),(v.type==="text"||v.type==="button")&&c(t("textAlign"),v.textAlign,[{value:"left",text:t("alignLeft")},{value:"center",text:t("alignCenter")},{value:"right",text:t("alignRight")}],O=>{v.textAlign=O,renderCanvas()}),c(t("borderWidth"),v.borderWidth,[{value:"none",text:t("borderNone")},{value:"thin",text:t("borderThin")},{value:"medium",text:t("borderMedium")},{value:"thick",text:t("borderThick")}],O=>{v.borderWidth=O,renderCanvas()}),v.type==="text"){s(t("fontSize"),v.fontSize||"16px",T=>{v.fontSize=T,renderCanvas()},"text"),c(t("fontWeight"),v.fontWeight||"normal",[{value:"normal",text:t("fontWeightNormal")},{value:"bold",text:t("fontWeightBold")}],T=>{v.fontWeight=T,renderCanvas()}),c(t("fontStyle"),v.fontStyle||"normal",[{value:"normal",text:t("fontStyleNormal")},{value:"italic",text:t("fontStyleItalic")}],T=>{v.fontStyle=T,renderCanvas()}),c(t("textDecoration"),v.textDecoration||"none",[{value:"none",text:t("textDecorationNone")},{value:"underline",text:t("textDecorationUnderline")}],T=>{v.textDecoration=T,renderCanvas()}),s(t("color"),v.color||"#333333",T=>{v.color=T,renderCanvas()},"color");const O=[{value:"sans-serif",text:"Sans-serif (Default)"},{value:"serif",text:"Serif"},{value:"monospace",text:"Monospace"},{value:"cursive",text:"Cursive"},{value:"fantasy",text:"Fantasy"},{value:"Arial, sans-serif",text:"Arial"},{value:"Verdana, sans-serif",text:"Verdana"},{value:"Helvetica, sans-serif",text:"Helvetica"},{value:"Tahoma, sans-serif",text:"Tahoma"},{value:"Trebuchet MS, sans-serif",text:"Trebuchet MS"},{value:"Times New Roman, serif",text:"Times New Roman"},{value:"Georgia, serif",text:"Georgia"},{value:"Palatino Linotype, Palatino, serif",text:"Palatino Linotype"},{value:"Courier New, monospace",text:"Courier New"},{value:"Lucida Console, monospace",text:"Lucida Console"}];c(t("fontFamily"),v.fontFamily||"sans-serif",O,T=>{v.fontFamily=T,renderCanvas()})}if(v.type==="image"&&(s(t("imageSource"),v.src||"",O=>{v.src=O,renderCanvas()}),c(t("objectFit"),v.objectFit||"contain",[{value:"contain",text:t("objectFitContain")},{value:"fill",text:t("objectFitFill")}],O=>{v.objectFit=O,renderCanvas()})),v.type==="button"){const O=[{value:"none",text:t("actionNone")},{value:"jumpToCard",text:t("actionGoToCard")}];if(c(t("action"),v.action||"none",O,T=>{v.action=T,T!=="jumpToCard"&&(v.jumpToCardId=null),updatePropertiesPanel(v)}),v.action==="jumpToCard"){const T=stack.cards.map((_,D)=>({value:_.id,text:`${D+1}. ${_.name}`}));c(t("destination"),v.jumpToCardId||"",T,_=>{v.jumpToCardId=_})}}s(t("x"),Math.round(v.x),O=>{v.x=Number(O),renderCanvas()},"number"),s(t("y"),Math.round(v.y),O=>{v.y=Number(O),renderCanvas()},"number"),s(t("width"),Math.round(v.width),O=>{v.width=Number(O),renderCanvas()},"number"),s(t("height"),Math.round(v.height),O=>{v.height=Number(O),renderCanvas()},"number");const g=document.createElement("div");g.className="prop-group";const x=document.createElement("label");x.textContent=t("scriptOnClick");const b=document.createElement("textarea");b.value=v.script,b.className="script-area",b.placeholder=t("magicPlaceholder"),b.disabled=!isMagicEnabled,b.addEventListener("input",()=>{v.script=b.value}),g.appendChild(x),g.appendChild(b);const S=document.createElement("a");S.href=t("aiHelperLink"),S.textContent=t("aiHelperText"),S.target="_blank",S.style.display="block",S.style.marginTop="5px",S.style.fontSize="0.8em",S.style.color="#88aaff",S.style.textDecoration="underline",g.appendChild(S),propertiesPanel.appendChild(g);const C=document.createElement("button");C.textContent=t("deleteObject"),C.className="delete-btn",C.addEventListener("click",()=>deleteObject(v)),propertiesPanel.appendChild(C)},deselectAllObjects=()=>{selectedObject=null,renderCanvas(),updatePropertiesPanel(null)},selectObject=v=>{isRunMode||(selectedObject=v,renderCanvas(),updatePropertiesPanel(v))};canvas.addEventListener("click",deselectAllObjects);const createObject=(v,s,c)=>{const f=getCurrentCard();if(!f)return;const d={id:`obj-${Date.now()}`,type:c,x:v,y:s,width:100,height:50,text:t(c==="button"?"defaultButtonText":"defaultTextBoxText"),textAlign:"left",borderWidth:"thin",script:"",action:"none",jumpToCardId:null,...c==="text"&&{fontSize:"16px",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",color:"#333333",fontFamily:"sans-serif"},...c==="image"&&{src:"https://via.placeholder.com/150",width:150,height:150,objectFit:"contain"}};f.objects.push(d),selectObject(d)},makeInteractive=(v,s)=>{interact(v).draggable({enabled:!isRunMode,listeners:{move(c){s.x+=c.dx,s.y+=c.dy,v.style.left=s.x+"px",v.style.top=s.y+"px"},end(){updatePropertiesPanel(s)}}}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},enabled:!isRunMode,listeners:{move(c){s.width=c.rect.width,s.height=c.rect.height,s.x+=c.deltaRect.left,s.y+=c.deltaRect.top,Object.assign(v.style,{width:s.width+"px",height:s.height+"px",left:s.x+"px",top:s.y+"px"})},end(){updatePropertiesPanel(s)}}})};let contextMenu=null;const removeContextMenu=()=>{contextMenu&&contextMenu.remove(),contextMenu=null};window.addEventListener("click",removeContextMenu);canvas.addEventListener("contextmenu",v=>{if(isRunMode){v.preventDefault();return}v.preventDefault(),removeContextMenu();const s=canvas.getBoundingClientRect(),c=v.clientX-s.left,f=v.clientY-s.top;contextMenu=document.createElement("div"),contextMenu.className="context-menu",contextMenu.style.left=`${v.clientX}px`,contextMenu.style.top=`${v.clientY}px`,[{label:t("contextMenuAddButton"),type:"button"},{label:t("contextMenuAddText"),type:"text"},{label:t("contextMenuAddImage"),type:"image"}].forEach(g=>{const x=document.createElement("div");x.className="context-menu-item",x.textContent=g.label,x.addEventListener("click",()=>{createObject(c,f,g.type),removeContextMenu()}),contextMenu.appendChild(x)}),document.body.appendChild(contextMenu)});const modalOverlay=document.createElement("div");modalOverlay.className="modal-overlay";const modalContent=document.createElement("div");modalContent.className="modal-content";const closeModal=()=>{modalOverlay.style.display="none"},closeBtn=document.createElement("button");closeBtn.className="modal-close-btn";closeBtn.innerHTML="&times;";closeBtn.onclick=closeModal;const modalTitle=document.createElement("h3");modalTitle.textContent=t("settings");const magicLabel=document.createElement("label");magicLabel.textContent=t("enterMagicWord");magicLabel.style.display="block";magicLabel.style.marginBottom="10px";const magicInput=document.createElement("input");magicInput.type="password";magicInput.style.paddingRight="30px";magicInput.onkeyup=v=>{v.key==="Enter"&&magicInput.value==="Magic"&&(isMagicEnabled=!0,magicInput.value="",closeModal(),updatePropertiesPanel(selectedObject),alert(t("magicEnabled")))};const magicInputContainer=document.createElement("div");magicInputContainer.style.position="relative";magicInputContainer.style.display="flex";magicInputContainer.style.alignItems="center";const toggleVisibilityBtn=document.createElement("span");toggleVisibilityBtn.className="password-toggle-icon";toggleVisibilityBtn.textContent="";toggleVisibilityBtn.onclick=()=>{magicInput.type==="password"?(magicInput.type="text",toggleVisibilityBtn.textContent=""):(magicInput.type="password",toggleVisibilityBtn.textContent="")};magicInputContainer.appendChild(magicInput);magicInputContainer.appendChild(toggleVisibilityBtn);modalContent.appendChild(closeBtn);modalContent.appendChild(modalTitle);modalContent.appendChild(magicLabel);modalContent.appendChild(magicInputContainer);modalOverlay.appendChild(modalContent);app.appendChild(modalOverlay);instance.loadLanguages(["en","ja"],()=>{renderAll()});

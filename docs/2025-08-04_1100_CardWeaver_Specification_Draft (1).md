### **プロジェクト名： "はいぱか" (仮称: CardWeaver)**

**コンセプト：**
HyperCardの思想を現代のWeb技術で再実装し、誰もが直感的にインタラクティブなコンテンツを作成できる、ミニマルなオーサリングツール。

**ターゲットユーザー：**
*   プログラミング経験はないが、自分のアイデアを形にしたいと考えている人。
*   教育者、学生、アーティスト、プランナー。
*   かつてのHyperCardユーザー。

**コア思想：**
*   **手軽さと奥深さの両立：** GUI操作だけで基本的なことは完結し、JavaScriptを書くことで高度な拡張も可能にする。
*   **触れる喜び：** オブジェクトを直接操作する、手触り感のあるUIを提供する。
*   **Webネイティブ：** 作成したコンテンツは単一のHTMLファイルとして出力され、ブラウザさえあれば誰でも閲覧・実行できる。
*   **魔法への敬意:** 高度なスクリプティング機能へのアクセスには「Magic」というキーワードを要求。これにより、シンプルな操作とプログラミングの世界を意図的に分離し、オリジナルへのリスペクトと遊び心を表現する。
*   **AIとの共生（橋渡し）:** 複雑なAI機能を内蔵するのではなく、外部の汎用AIチャットサービス（Web版Gemini, ChatGPT等）へのリンクを提示。ユーザーが外部でコードを生成し、それを本ツールに持ち込んで利用する、という明確なワークフローを案内する。
*   **グローバルな視点:** 初期設計から多言語対応を考慮し、世界中の誰もが母国語で利用できることを目指す。

---

### **機能仕様**

**1. 基本構造**

*   **スタック (Stack):** プロジェクト全体を指す。単一のHTMLファイルとして保存される。
*   **カード (Card):** スタックを構成する各ページ。ユーザーは複数のカードを作成し、それらを切り替えて表示する。
*   **オブジェクト (Object):** カードの上に配置できる要素。以下の種類がある。
    *   テキストボックス
    *   ボタン
    *   画像
    *   動画

**2. UI/UX**

*   **メインビュー:** 現在選択されているカードを表示するキャンバス領域。
*   **カード一覧パネル:** スタック内の全カードをサムネイルで一覧表示し、クリックで選択・移動できる。カードの追加、削除、並べ替えもここで行う。
*   **オブジェクトの作成:**
    *   メインビューのキャンバス領域で右クリックすると、コンテキストメニューが表示される。
    *   メニューから「ボタンを追加」「画像を追加」などを選択すると、カーソル位置にオブジェクトが生成される。
*   **オブジェクトの操作:**
    *   すべてのオブジェクトは、ドラッグ＆ドロップで自由に移動できる。
    *   オブジェクトの四隅や辺をドラッグすることで、直感的にリサイズできる。
*   **プロパティパネル:**
    *   いずれかのオブジェクトを選択すると、画面の右側にそのオブジェクト専用のプロパティパネルが表示される。
    *   これにより、選択中のオブジェクトの見た目や動作を詳細に設定する。

**3. オブジェクトごとのプロパティ**

*   **テキストボックス:**
    *   内容の編集 (WYSIWYG)
    *   フォントファミリー、サイズ、色、太字、斜体、下線の設定
*   **画像 / 動画:**
    *   ソースの指定（ローカルからアップロード or URL指定）。
    *   代替テキストの設定。
    *   **ファイルサイズ制限:** ユーザビリティと出力ファイルの肥大化を防ぐため、アップロード可能なファイルサイズに上限を設ける（例: 画像 5MB, 動画 50MB）。プロパティパネルには、上限と現在のファイルサイズを併記する。
    *   **動画の再生時間:** 動画は再生時間に上限を設ける（例: 60秒）。
*   **ボタン:**
    *   **表示:** ラベルテキストの変更
    *   **アクション (onclickイベント):** 以下の動作をプロパティパネルのプルダウンから選択する。
        1.  **なし**
        2.  **カードへ移動:** 移動先のカードを、カード一覧から選択する。
        3.  **URLを開く:** 対象のURLを入力する。
        4.  **カスタムJavaScriptを実行 (要アンロック):** 初めはロックされており、「Magic」と入力することでコードエディタが有効になる。アンロック後、エディタの近くに外部AIチャットへのリンクを設置。「このリンク先のAIに『こういう動きをするスクリプトを書いて』とお願いして、出来上がったコードをここに貼り付けてください」といったメッセージで、具体的な利用方法を案内する。

**4. 技術仕様**

*   **開発言語:** TypeScript
*   **多言語対応 (i18n):**
    *   UI上のすべてのテキストはハードコーディングせず、`i18next`のような専門ライブラリを用いて管理する。
    *   言語ごとに翻訳ファイル（例: `en.json`, `ja.json`）を用意し、動的に切り替えられる構造を初期段階から導入する。
*   **フレームワーク/ライブラリ:**
    *   **開発環境:** Vite
    *   **オブジェクト操作:** `interact.js` (ドラッグ、ドロップ、リサイズ機能の実装)
    *   **レンダリング:** 素のHTML/CSS/JS (DOMベース) で実装する。各オブジェクト（テキスト、ボタン等）はHTML要素としてDOMツリーに直接描画される。これにより、Web標準との親和性やアクセシビリティを確保する。
*   **出力形式:**
    *   作成したスタックは、すべてのカード情報、オブジェクト情報、スクリプトを含んだ、単一の自己完結した `.html` ファイルとしてエクスポートされる。
    *   ユーザーがアップロードした画像等のバイナリファイルは、Base64形式にエンコードされ、HTMLファイル内に埋め込まれる。

---

### **5. 公開・デプロイ戦略**

**1. 基本的な考え方 (クライアントサイド・完結モデル)**
*   本ツールは、サーバーサイドでのデータ保存を必要としない、クライアントサイドで完結するWebアプリケーションとして設計する。
*   オーサリング（編集）機能はすべてユーザーのブラウザ上で実行される。
*   作成されたコンテンツ（スタック）は、サーバーに保存されるのではなく、ユーザーが自身のPCに `.html` ファイルとしてダウンロード（エクスポート）する形で提供される。

**2. 公開プラットフォーム**
*   **Netlify / Vercel / GitHub Pages 等の静的ホスティングサービス**
    *   **理由:** 本ツール自体はサーバーサイドの動的な処理を必要としないため、静的サイトとして容易に、かつ無料で公開できる。ユーザーはURLにアクセスするだけで、すぐにツールを利用開始できる。

**3. メリット**
*   **開発・運用のシンプル化:** サーバーやデータベースの構築・管理が不要なため、開発者はフロントエンドの機能開発に集中できる。
*   **ユーザーのプライバシー保護:** ユーザーが作成したデータは開発者側では一切保持しないため、プライバシーが完全に保護される。
*   **ポータビリティ:** ユーザーは書き出したHTMLファイルをWebサーバーにアップロードしたり、メールで送ったりと、自由に配布・利用できる。
*   **HyperCardの思想の継承:** 個人のコンピュータ内で創造的な作業が完結するという、オリジナルのHyperCardが持っていた思想をWeb上で再現する。